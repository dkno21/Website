<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FurinaSite - Website Interaktif</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* VARIABEL CSS UNTUK TEMA */
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3f37c9;
            --background-color: #f8f9fa;
            --surface-color: #ffffff;
            --text-color: #212529;
            --text-secondary: #6c757d;
            --border-color: #dee2e6;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --accent-color: #ff6b6b;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --danger-color: #dc3545;
        }

        /* TEMA GELAP */
        .dark-theme {
            --primary-color: #5e72e4;
            --secondary-color: #4a5fc1;
            --background-color: #121212;
            --surface-color: #1e1e1e;
            --text-color: #e9ecef;
            --text-secondary: #adb5bd;
            --border-color: #343a40;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            --accent-color: #ff6b6b;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --danger-color: #dc3545;
        }

        /* RESET & BASE STYLES */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            background-image: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            background-attachment: fixed;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ANIMASI */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }

        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out;
        }

        .animate-slideIn {
            animation: slideIn 0.3s ease-out;
        }

        /* HEADER & NAVIGASI */
        header {
            background-color: var(--surface-color);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
        }

        .menu-toggle {
            display: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-left: 25px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .nav-links a:hover, .nav-links a.active {
            background-color: var(--primary-color);
            color: white;
        }

        .nav-actions {
            display: flex;
            align-items: center;
        }

        .theme-toggle, .music-toggle {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: var(--text-color);
            cursor: pointer;
            margin-left: 15px;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .theme-toggle:hover, .music-toggle:hover {
            background-color: var(--border-color);
        }

        /* SIDEBAR */
        .sidebar {
            position: fixed;
            top: 0;
            left: -300px;
            width: 280px;
            height: 100vh;
            background-color: var(--surface-color);
            box-shadow: var(--shadow);
            z-index: 200;
            padding: 20px;
            overflow-y: auto;
            transition: left 0.3s ease;
        }

        .sidebar.active {
            left: 0;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .sidebar-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-color);
            cursor: pointer;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            margin-bottom: 10px;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            text-decoration: none;
            color: var(--text-color);
            border-radius: 8px;
            transition: all 0.3s;
        }

        .sidebar-menu a:hover, .sidebar-menu a.active {
            background-color: var(--primary-color);
            color: white;
        }

        .sidebar-menu i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 150;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        /* WAKTU REAL-TIME */
        .time-container {
            background-color: var(--surface-color);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .time-display {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .date-display {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }
/* STYLE WAKTU PERIOD */
.time-period {
    font-size: 1.1rem;
    font-weight: 500;
    color: var(--primary-color);
    margin-top: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.time-period-emoji {
    font-size: 1.3rem;
}
        /* KONTEN UTAMA */
        .main-content {
            padding: 30px 0;
            min-height: calc(100vh - 180px);
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .card {
            background-color: var(--surface-color);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .card-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
        }

        .card-title i {
            margin-right: 10px;
        }

        /* WELCOME MESSAGE */
        .welcome-message {
            text-align: center;
            padding: 20px;
            margin-bottom: 20px;
            background-color: var(--surface-color);
            border-radius: 10px;
            box-shadow: var(--shadow);
        }

        .welcome-message h2 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        /* RATING SECTION */
        .rating-section {
            text-align: center;
            margin: 30px 0;
        }

        .average-rating {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .stars {
            display: flex;
            justify-content: center;
            margin-bottom: 15px;
        }

        .star {
            font-size: 2rem;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s;
            margin: 0 5px;
        }

        .star.active {
            color: var(--warning-color);
        }

        .rating-count {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* KOMENTAR SECTION */
        .comment-section {
            margin-top: 30px;
        }

        .comment-form {
            margin-bottom: 20px;
        }

        .comment-rating {
            margin-bottom: 15px;
        }

        .comment-rating-stars {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
        }

        .comment-rating-star {
            font-size: 1.5rem;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s;
        }

        .comment-rating-star.active {
            color: var(--warning-color);
        }

        .comment-rating-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .comment-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--background-color);
            color: var(--text-color);
            resize: vertical;
            min-height: 100px;
            margin-bottom: 10px;
        }

        .comment-submit {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s;
        }

        .comment-submit:hover {
            background-color: var(--secondary-color);
        }

        .comment-submit:disabled {
            background-color: var(--text-secondary);
            cursor: not-allowed;
        }

        .comments-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .comment {
            background-color: var(--background-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid var(--primary-color);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .comment-author {
            font-weight: 600;
            color: var(--primary-color);
        }

        .comment-date {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .comment-rating-display {
            margin-bottom: 10px;
        }

        .comment-rating-stars-display {
            display: flex;
            gap: 2px;
        }

        .comment-rating-star-display {
            font-size: 1rem;
            color: #ddd;
        }

        .comment-rating-star-display.active {
            color: var(--warning-color);
        }

        .comment-content {
            color: var(--text-color);
        }

        /* WHATSAPP BUTTONS */
        .whatsapp-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .whatsapp-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            background-color: #25D366;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .whatsapp-btn:hover {
            background-color: #128C7E;
            transform: translateY(-2px);
        }

        .whatsapp-btn i {
            font-size: 1.2rem;
        }

        /* PRODUK & LAYANAN */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .product-card {
            background-color: var(--surface-color);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-card.out-of-stock {
            opacity: 0.7;
            filter: grayscale(0.5);
        }

        .product-card.out-of-stock:hover {
            transform: none;
            cursor: not-allowed;
        }

        .product-image {
            height: 160px;
            background-color: var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .product-info {
            padding: 15px;
        }

        .product-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .product-price {
            color: var(--primary-color);
            font-weight: 700;
            margin-bottom: 10px;
        }

        .product-original-price {
            text-decoration: line-through;
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-right: 10px;
        }

        .product-discount {
            background-color: var(--accent-color);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .product-stock {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .product-stock.out-of-stock {
            color: var(--accent-color);
            font-weight: bold;
        }

        .product-actions {
            display: flex;
            justify-content: space-between;
        }

        .buy-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }

        .buy-btn:hover {
            background-color: var(--secondary-color);
        }

        .buy-btn:disabled {
            background-color: var(--text-secondary);
            cursor: not-allowed;
        }

        .product-admin-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
        }

        .edit-product-btn, .delete-product-btn {
            background-color: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }

        .edit-product-btn {
            color: var(--primary-color);
        }

        .delete-product-btn {
            color: var(--accent-color);
        }

        .edit-product-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .delete-product-btn:hover {
            background-color: var(--accent-color);
            color: white;
        }

        /* PAYMENT METHODS */
        .payment-methods {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .payment-method {
            display: flex;
            align-items: center;
            background-color: var(--background-color);
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-method:hover, .payment-method.active {
            background-color: var(--primary-color);
            color: white;
        }

        .payment-method i {
            font-size: 1.5rem;
            margin-right: 10px;
        }

        /* LIVE CHAT STYLES */
        .chat-container {
            height: 600px;
            display: flex;
            flex-direction: column;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            overflow: hidden;
            background-color: var(--surface-color);
        }

        .chat-header {
            padding: 15px;
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            font-weight: 600;
        }

        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background-color: var(--background-color);
            display: flex;
            flex-direction: column;
        }

        .message {
            max-width: 70%;
            margin-bottom: 15px;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
            word-wrap: break-word;
            animation: fadeIn 0.3s ease-out;
        }

        .message.received {
            align-self: flex-start;
            background-color: var(--surface-color);
            border-bottom-left-radius: 5px;
        }

        .message.sent {
            align-self: flex-end;
            background-color: var(--primary-color);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .message-sender {
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--primary-color);
        }

        .message.sent .message-sender {
            color: rgba(255, 255, 255, 0.8);
            text-align: right;
        }

        .message-rank {
            display: inline-block;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 5px;
            font-weight: normal;
        }

        .rank-owner {
            background-color: #ff6b35;
            color: white;
        }

        .rank-admin {
            background-color: gold;
            color: black;
        }

        .rank-newbie {
            background-color: silver;
            color: black;
        }

        .message-time {
            font-size: 0.7rem;
            text-align: right;
            margin-top: 5px;
            opacity: 0.7;
        }

        .chat-input-container {
            display: flex;
            padding: 15px;
            background-color: var(--surface-color);
            border-top: 1px solid var(--border-color);
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 25px;
            background-color: var(--background-color);
            color: var(--text-color);
            margin-right: 10px;
            font-size: 1rem;
        }

        .chat-send-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: background-color 0.3s;
        }

        .chat-send-btn:hover {
            background-color: var(--secondary-color);
        }

        /* MLBB WIKI STYLES */
        .wiki-content {
            margin-top: 20px;
        }

        .wiki-section {
            margin-bottom: 30px;
        }

        .wiki-section h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--border-color);
        }

        .wiki-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .wiki-card {
            background-color: var(--surface-color);
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .wiki-card:hover {
            transform: translateY(-5px);
        }

        .wiki-card h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .wiki-card h4 i {
            margin-right: 10px;
        }

        .wiki-card p {
            color: var(--text-color);
            margin-bottom: 10px;
        }

        .hero-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .hero-item {
            text-align: center;
            padding: 10px;
            background-color: var(--background-color);
            border-radius: 8px;
            transition: background-color 0.3s;
        }

        .hero-item:hover {
            background-color: var(--primary-color);
            color: white;
        }

        /* INBOX STYLES */
        .inbox-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }

        .inbox-tab {
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 500;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .inbox-tab.active {
            border-bottom-color: var(--primary-color);
            color: var(--primary-color);
        }

        .inbox-content {
            display: none;
        }

        .inbox-content.active {
            display: block;
        }

        .inbox-messages {
            max-height: 500px;
            overflow-y: auto;
        }

        .inbox-message {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .inbox-message:hover {
            background-color: var(--background-color);
        }

        .inbox-message.unread {
            background-color: rgba(67, 97, 238, 0.1);
        }

        .inbox-message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .inbox-message-title {
            font-weight: 600;
        }

        .inbox-message-date {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .inbox-message-preview {
            color: var(--text-secondary);
            font-size: 0.9rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .inbox-message-detail {
            display: none;
            padding: 20px;
            background-color: var(--background-color);
            border-radius: 8px;
            margin-top: 15px;
        }

        .inbox-message-detail.active {
            display: block;
        }

        .message-detail-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .message-detail-title {
            font-weight: 600;
            font-size: 1.2rem;
        }

        .message-detail-sender {
            color: var(--primary-color);
            font-weight: 500;
        }

        .message-detail-date {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .message-detail-content {
            line-height: 1.6;
        }

        .activity-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .activity-item {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .activity-details {
            flex: 1;
        }

        .activity-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .activity-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .activity-date {
            color: var(--text-secondary);
            font-size: 0.8rem;
            text-align: right;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 10px;
        }

        .status-paid {
            background-color: var(--success-color);
            color: white;
        }

        .status-unpaid {
            background-color: var(--accent-color);
            color: white;
        }

        /* MODAL */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 300;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--surface-color);
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            padding: 25px;
            box-shadow: var(--shadow);
            transform: translateY(-20px);
            transition: transform 0.3s;
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-color);
            cursor: pointer;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            background-color: var(--background-color);
            color: var(--text-color);
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
        }

        .btn-secondary {
            background-color: var(--border-color);
            color: var(--text-color);
        }

        .btn-secondary:hover {
            background-color: var(--text-secondary);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-danger:hover {
            background-color: #c82333;
        }

        /* PROFILE SECTION */
        .profile-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            color: white;
            font-size: 2.5rem;
        }

        .profile-name {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .profile-rank {
            display: inline-block;
            padding: 5px 15px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            width: 100%;
            max-width: 300px;
        }

        .stat-card {
            background-color: var(--background-color);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* FOOTER */
        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .copyright {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* MUSIC PLAYER */
        .music-player {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--surface-color);
            border-radius: 10px;
            padding: 15px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            z-index: 100;
            opacity: 0.9;
            min-width: 250px;
        }

        .music-info {
            margin-right: 15px;
            flex-grow: 1;
        }

        .music-title {
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .music-artist {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .music-controls {
            display: flex;
            align-items: center;
        }

        .music-btn {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 1.2rem;
            margin: 0 5px;
            transition: color 0.3s;
        }

        .music-btn:hover {
            color: var(--primary-color);
        }

        .music-progress {
            width: 100%;
            height: 4px;
            background-color: var(--border-color);
            border-radius: 2px;
            margin-top: 8px;
            overflow: hidden;
        }

        .music-progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 30%;
            border-radius: 2px;
        }

        /* YOUTUBE MUSIC PLAYER */
        .youtube-music-player {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: var(--surface-color);
            border-radius: 10px;
            padding: 15px;
            box-shadow: var(--shadow);
            z-index: 100;
            opacity: 0.9;
            min-width: 300px;
            max-width: 400px;
        }

        .youtube-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .youtube-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--primary-color);
        }

        .youtube-close {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 1.2rem;
        }

        .youtube-input-container {
            display: flex;
            margin-bottom: 10px;
        }

        .youtube-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            background-color: var(--background-color);
            color: var(--text-color);
            margin-right: 10px;
            font-size: 0.9rem;
        }

        .youtube-add-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .youtube-add-btn:hover {
            background-color: var(--secondary-color);
        }

        .youtube-playlist {
            max-height: 150px;
            overflow-y: auto;
            margin-bottom: 10px;
        }

        .youtube-song {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .youtube-song:last-child {
            border-bottom: none;
        }

        .youtube-song-title {
            font-size: 0.9rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            flex: 1;
        }

        .youtube-song-actions {
            display: flex;
            gap: 5px;
        }

        .youtube-play-btn, .youtube-delete-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .youtube-play-btn {
            color: var(--primary-color);
        }

        .youtube-delete-btn {
            color: var(--accent-color);
        }

        .youtube-audio-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .youtube-audio-btn {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 1.2rem;
            transition: color 0.3s;
        }

        .youtube-audio-btn:hover {
            color: var(--primary-color);
        }

        .youtube-audio-btn.play-pause {
            font-size: 1.5rem;
        }

        .youtube-audio-progress {
            width: 100%;
            height: 4px;
            background-color: var(--border-color);
            border-radius: 2px;
            margin-top: 8px;
            overflow: hidden;
        }

        .youtube-audio-progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            border-radius: 2px;
            transition: width 0.1s;
        }

        /* ADMIN CONTROLS */
        .admin-controls {
            margin-top: 20px;
            padding: 15px;
            background-color: var(--background-color);
            border-radius: 8px;
            border-left: 4px solid var(--accent-color);
        }

        .admin-title {
            font-size: 1.2rem;
            color: var(--accent-color);
            margin-bottom: 10px;
        }

        .admin-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .admin-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }

        .admin-btn:hover {
            background-color: #ff5252;
        }

        /* PAYMENT DETAIL MODAL */
        .payment-detail {
            margin-top: 15px;
            padding: 15px;
            background-color: var(--background-color);
            border-radius: 8px;
            text-align: center;
        }

        .payment-number {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 10px 0;
            color: var(--primary-color);
            user-select: all;
            cursor: text;
        }

        .copy-btn {
            background-color: var(--success-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
            margin-top: 10px;
        }

        .copy-btn:hover {
            background-color: #3d8b40;
        }

        /* USER MANAGEMENT STYLES */
        .user-management {
            margin-top: 30px;
            padding: 20px;
            background-color: var(--background-color);
            border-radius: 10px;
            border-left: 4px solid #ff6b35;
        }

        .user-management-title {
            font-size: 1.3rem;
            color: #ff6b35;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .user-management-title i {
            margin-right: 10px;
        }

        .users-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
        }

        .user-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background-color: var(--surface-color);
            border-radius: 8px;
            margin-bottom: 10px;
            transition: background-color 0.3s;
        }

        .user-item:hover {
            background-color: var(--border-color);
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .user-details {
            display: flex;
            gap: 15px;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .user-rank {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .rank-owner-badge {
            background-color: #ff6b35;
            color: white;
        }

        .rank-admin-badge {
            background-color: gold;
            color: black;
        }

        .rank-newbie-badge {
            background-color: silver;
            color: black;
        }

        .user-actions {
            display: flex;
            gap: 8px;
        }

        .delete-user-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background-color 0.3s;
        }

        .delete-user-btn:hover {
            background-color: #ff5252;
        }

        .delete-user-btn:disabled {
            background-color: var(--text-secondary);
            cursor: not-allowed;
        }

        /* ORDER MANAGEMENT STYLES */
        .orders-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .order-item {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.3s;
        }

        .order-item:hover {
            background-color: var(--background-color);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .order-id {
            font-weight: 600;
            color: var(--primary-color);
        }

        .order-status {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .order-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }

        .order-product {
            font-weight: 500;
        }

        .order-customer {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .order-wa {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .order-price {
            font-weight: 600;
            color: var(--primary-color);
            text-align: right;
        }

        .order-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }

            .nav-links {
                display: none;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }

            .payment-methods {
                flex-direction: column;
            }

            .footer-content {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }

            .music-player {
                bottom: 10px;
                right: 10px;
                left: 10px;
            }

            .youtube-music-player {
                bottom: 10px;
                left: 10px;
                right: 10px;
                max-width: none;
            }

            .message {
                max-width: 85%;
            }

            .wiki-grid {
                grid-template-columns: 1fr;
            }

            .hero-list {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }

            .whatsapp-buttons {
                flex-direction: column;
                align-items: center;
            }

            .user-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .user-actions {
                margin-top: 10px;
                width: 100%;
                justify-content: flex-end;
            }

            .inbox-tabs {
                flex-direction: column;
            }

            .inbox-tab {
                width: 100%;
                text-align: center;
            }

            .order-details {
                grid-template-columns: 1fr;
            }
        }

        /* UTILITY CLASSES */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .mt-20 {
            margin-top: 20px;
        }
        
        /* PROFILE ICON */
.profile-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--primary-color);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    margin-left: 15px;
}

.profile-icon:hover {
    background-color: var(--secondary-color);
}

/* GAME FILTER */
.game-filter {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.filter-btn {
    padding: 8px 16px;
    background-color: var(--background-color);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.3s;
    font-weight: 500;
}

.filter-btn.active {
    background-color: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

.game-content {
    display: none;
}

.game-content.active {
    display: block;
    animation: fadeIn 0.5s ease-out;
}
    </style>
</head>
<body>
    <!-- HEADER & NAVIGASI -->
    <header>
        <div class="container nav-container">
            <div class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </div>
            <div class="logo">
                <span>FurinaSite</span>
            </div>
            <ul class="nav-links">
                <li><a href="#" class="active" data-page="home"><i class="fas fa-home"></i> Beranda</a></li>
                <li><a href="#" data-page="services"><i class="fas fa-concierge-bell"></i> Layanan</a></li>
                <li><a href="#" data-page="mlbb"><i class="fas fa-gamepad"></i> Games Wiki</a></li>
                <li><a href="#" data-page="chat"><i class="fas fa-comments"></i> Live Chat</a></li>
                <li><a href="#" data-page="inbox"><i class="fas fa-envelope"></i> Inbox</a></li>
                <li><a href="#" data-page="profile"><i class="fas fa-user"></i> Profil</a></li>
                <li><a href="#" data-page="help"><i class="fas fa-question-circle"></i> Bantuan</a></li>
            </ul>
            <div class="nav-actions">
                <button class="theme-toggle" id="themeToggle" title="Toggle Tema">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="music-toggle" id="musicToggle" title="Toggle Musik">
                    <i class="fas fa-music"></i>
                </button>
                <button class="btn btn-primary" id="loginBtn">Masuk</button>
<div class="profile-icon" id="profileIcon" style="display: none;">
    <i class="fas fa-user"></i>
</div>
            </div>
        </div>
    </header>

    <!-- SIDEBAR -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>Menu List</h3>
            <button class="sidebar-close" id="sidebarClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <ul class="sidebar-menu">
            <li><a href="#" class="active" data-page="home"><i class="fas fa-home"></i> Beranda</a></li>
            <li><a href="#" data-page="services"><i class="fas fa-concierge-bell"></i> Layanan</a></li>
            <li><a href="#" data-page="mlbb"><i class="fas fa-gamepad"></i> Games Wiki</a></li>
            <li><a href="#" data-page="chat"><i class="fas fa-comments"></i> Live Chat</a></li>
            <li><a href="#" data-page="inbox"><i class="fas fa-envelope"></i> Inbox</a></li>
            <li><a href="#" data-page="profile"><i class="fas fa-user"></i> Profil</a></li>
            <li><a href="#" data-page="help"><i class="fas fa-question-circle"></i> Bantuan</a></li>
        </ul>
    </div>
    <div class="overlay" id="overlay"></div>

    <!-- WAKTU REAL-TIME -->
<div class="container">
    <div class="time-container animate-fadeIn">
        <div class="time-display" id="timeDisplay">00:00:00</div>
        <div class="date-display" id="dateDisplay">Hari, Tanggal Bulan Tahun</div>
        <!-- TAMBAHAN BARU - Waktu dengan Emoji -->
        <div class="time-period" id="timePeriod">
            <span id="timePeriodText">Pagi</span>
            <span id="timePeriodEmoji">ðŸŒ…</span>
        </div>
    </div>
</div>

    <!-- KONTEN UTAMA -->
    <main class="main-content">
        <div class="container">
            <!-- BERANDA -->
            <section id="homePage" class="page active">
                <div class="welcome-message">
                    <h2 id="welcomeText">Selamat Datang di FurinaSite!</h2>
                    <p id="welcomeSubtext">Website masih dalam tahap pengembangan</p>
                    <div class="mt-20">
                        <h3>Total Pengguna Terdaftar: <span id="totalUsers">1</span></h3>
                    </div>
                </div>

                <div class="card">
                    <h2 class="card-title"><i class="fas fa-star"></i> Rating Pengguna</h2>
                    <div class="rating-section">
                        <div class="average-rating" id="averageRating">0</div>
                        <div class="stars" id="averageStars">
                            <!-- Bintang akan diisi oleh JavaScript -->
                        </div>
                        <div class="rating-count" id="ratingCount">Berdasarkan 0 rating</div>
                    </div>
                </div>

                <div class="card comment-section">
                    <h2 class="card-title"><i class="fas fa-comments"></i> Komentar Pengguna</h2>
                    <div class="comment-form" id="commentForm">
                        <div class="comment-rating">
                            <div class="comment-rating-text">Sertakan bintang untuk memberikan komentar mengenai website kami:):</div>
                            <div class="comment-rating-stars" id="commentRatingStars">
                                <span class="comment-rating-star" data-value="1"><i class="far fa-star"></i></span>
                                <span class="comment-rating-star" data-value="2"><i class="far fa-star"></i></span>
                                <span class="comment-rating-star" data-value="3"><i class="far fa-star"></i></span>
                                <span class="comment-rating-star" data-value="4"><i class="far fa-star"></i></span>
                                <span class="comment-rating-star" data-value="5"><i class="far fa-star"></i></span>
                            </div>
                        </div>
                        <textarea class="comment-input" id="commentInput" placeholder="Usahakan untuk memberikan komentar positif agar kami tetap semangat mengembangkan web ini..."></textarea>
                        <button class="comment-submit" id="commentSubmit" disabled>Kirim Komentar</button>
                    </div>
                    <div class="comments-list" id="commentsList">
                        <!-- Komentar akan diisi oleh JavaScript -->
                    </div>
                </div>

                <div class="whatsapp-buttons">
                    <a href="https://wa.me/6285933452952?text=owner+aku+butuh+bantuan" target="_blank" class="whatsapp-btn">
                        <i class="fab fa-whatsapp"></i>
                        <span>Butuh Bantuan?</span>
                    </a>
                    <a href="https://whatsapp.com/channel/0029VbBd2LcHltY73VtPja1Y" target="_blank" class="whatsapp-btn">
                        <i class="fab fa-whatsapp"></i>
                        <span>Ikuti Saluran Resmi Kami!</span>
                    </a>
                </div>
            </section>

            <!-- LAYANAN -->
            <section id="servicesPage" class="page">
                <div class="card">
                    <h2 class="card-title"><i class="fas fa-concierge-bell"></i> Layanan Yang Tersedia</h2>
                    <p>Berikut adalah layanan dan produk yang kami tawarkan:</p>
                    
                    <div class="products-grid" id="productsGrid">
                        <!-- Produk akan diisi oleh JavaScript -->
                    </div>

                    <div class="admin-controls hidden" id="adminControls">
                        <h3 class="admin-title">Kontrol Admin</h3>
                        <div class="admin-actions">
                            <button class="admin-btn" id="addProductBtn">Tambah Produk</button>
                            <button class="admin-btn" id="editPaymentBtn">Edit Metode Pembayaran</button>
                            <button class="admin-btn" id="sendAnnouncementBtn">Kirim Pengumuman</button>
                        </div>
                    </div>

                    <div class="mt-20">
                        <h3 class="card-title"><i class="fas fa-credit-card"></i> Metode Pembayaran</h3>
                        <div class="payment-methods" id="paymentMethods">
                            <!-- Metode pembayaran akan diisi oleh JavaScript -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- MLBB WIKI -->
            <section id="mlbbPage" class="page">
    <div class="card">
        <h2 class="card-title"><i class="fas fa-gamepad"></i> Games Wiki</h2>
        <p>Informasi lengkap seputar game-game populer</p>
        
        <!-- FILTER GAME -->
        <div class="game-filter">
            <button class="filter-btn active" data-game="mlbb">Mobile Legends</button>
            <button class="filter-btn" data-game="genshin">Genshin Impact</button>
        </div>
        
        <div class="wiki-content">
            <!-- MOBILE LEGENDS CONTENT -->
            <div class="game-content active" id="mlbb-content">
                <!-- KONTEN MLBB ASLI DIMASUKKAN DI SINI -->
                <div class="wiki-section">
                    <h3><i class="fas fa-info-circle"></i> Tentang Mobile Legends</h3>
                    <p>Mobile Legends: Bang Bang adalah game MOBA 5v5 yang dikembangkan oleh Moonton. Pemain bekerja sama dengan tim untuk menghancurkan base lawan sambil mempertahankan base sendiri.</p>
                </div>
                
                <div class="wiki-section">
                    <h3><i class="fas fa-trophy"></i> Role Hero</h3>
                    <div class="wiki-grid">
                        <div class="wiki-card">
                            <h4><i class="fas fa-shield-alt"></i> Tank</h4>
                            <p>Hero dengan pertahanan tinggi yang bertugas melindungi rekan tim dan memulai pertempuran.</p>
                        </div>
                        <div class="wiki-card">
                            <h4><i class="fas fa-fist-raised"></i> Fighter</h4>
                            <p>Hero dengan keseimbangan antara damage dan pertahanan, efektif dalam pertarungan jarak dekat.</p>
                        </div>
                        <div class="wiki-card">
                            <h4><i class="fas fa-bolt"></i> Assassin</h4>
                            <p>Hero dengan damage tinggi dan mobilitas tinggi, ahli membunuh carry lawan dengan cepat.</p>
                        </div>
                        <div class="wiki-card">
                            <h4><i class="fas fa-magic"></i> Mage</h4>
                            <p>Hero dengan damage skill yang tinggi, biasanya menggunakan magic damage dari jarak jauh.</p>
                        </div>
                        <div class="wiki-card">
                            <h4><i class="fas fa-crosshairs"></i> Marksman</h4>
                            <p>Hero dengan damage fisik tinggi dari jarak jauh, sangat kuat di late game.</p>
                        </div>
                        <div class="wiki-card">
                            <h4><i class="fas fa-plus-circle"></i> Support</h4>
                            <p>Hero yang membantu tim dengan heal, shield, atau crowd control untuk mengontrol pertempuran.</p>
                        </div>
                    </div>
                </div>
                
                <div class="wiki-section">
                    <h3><i class="fas fa-users"></i> Hero Populer S38</h3>
                    <div class="hero-list">
                        <div class="hero-item">Natan</div>
                        <div class="hero-item">Alucard</div>
                        <div class="hero-item">Cici</div>
                        <div class="hero-item">Fanny</div>
                        <div class="hero-item">Phoveus</div>
                        <div class="hero-item">Helcurt</div>
                        <div class="hero-item">Esmeralda</div>
                        <div class="hero-item">Granger</div>
                        <div class="hero-item">Wanwan</div>
                        <div class="hero-item">Guinevere</div>
                    </div>
                </div>
                
                <div class="wiki-section">
                    <h3><i class="fas fa-map"></i> Peta Pertempuran</h3>
                    <p>Peta Mobile Legends terdiri dari tiga lane (top, middle, bottom) dan jungle area. Setiap tim memiliki base dengan Crystal yang harus dihancurkan untuk memenangkan pertandingan.</p>
                </div>
            </div>

            <!-- GENSHIN IMPACT CONTENT -->
            <div class="game-content" id="genshin-content">
                <div class="wiki-section">
                    <h3><i class="fas fa-info-circle"></i> Tentang Genshin Impact</h3>
                    <p>Genshin Impact adalah game action RPG open-world yang dikembangkan oleh miHoYo. Pemain menjelajahi dunia Teyvat yang luas sambil mengumpulkan karakter dan melawan musuh.</p>
                </div>
                
                <div class="wiki-section">
                    <h3><i class="fas fa-users"></i> Karakter Populer</h3>
                    <div class="hero-list">
                        <div class="hero-item">Diluc</div>
                        <div class="hero-item">Venti</div>
                        <div class="hero-item">Zhongli</div>
                        <div class="hero-item">Ganyu</div>
                        <div class="hero-item">Hu Tao</div>
                        <div class="hero-item">Kazuha</div>
                        <div class="hero-item">Raiden Shogun</div>
                        <div class="hero-item">Nahida</div>
                    </div>
                </div>
                
                <div class="wiki-section">
                    <h3><i class="fas fa-map"></i> Region Teyvat</h3>
                    <div class="wiki-grid">
                        <div class="wiki-card">
                            <h4><i class="fas fa-mountain"></i> Mondstadt</h4>
                            <p>Kota kebebasan yang dinaungi Archon Anemo, Barbatos. Dikenal dengan anginnya yang sepoi-sepoi.</p>
                        </div>
                        <div class="wiki-card">
                            <h4><i class="fas fa-gem"></i> Liyue</h4>
                            <p>Pelabuhan yang makmur yang dinaungi Archon Geo, Morax. Dikenal dengan kontrak dan perdagangannya.</p>
                        </div>
                        <div class="wiki-card">
                            <h4><i class="fas fa-bolt"></i> Inazuma</h4>
                            <p>Kepulauan yang tertutup yang dinaungi Archon Electro, Raiden Shogun. Dikenal dengan Dekret Penyitaan Vision.</p>
                        </div>
                        <div class="wiki-card">
                            <h4><i class="fas fa-leaf"></i> Sumeru</h4>
                            <p>Bangsa kebijaksanaan yang dinaungi Archon Dendro, Lesser Lord Kusanali. Dikenal dengan Akademiya-nya.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

            <!-- LIVE CHAT -->
            <section id="chatPage" class="page">
                <div class="card">
                    <h2 class="card-title"><i class="fas fa-comments"></i> Live Chat Publik</h2>
                    <p>Chat dengan semua pengguna FurinaSite yang sedang online</p>
                    
                    <div class="chat-container">
                        <div class="chat-header">
                            <i class="fas fa-users"></i> Chat Room Publik
                        </div>
                        <div class="chat-messages" id="chatMessages">
                            <!-- Pesan chat akan dimuat di sini -->
                            <div class="message received">
                                <div class="message-sender">System <span class="message-rank rank-owner">ðŸª Owner</span></div>
                                <div class="message-content">Selamat datang di chat room publik! Semua pesan dapat dilihat oleh pengguna lain.</div>
                                <div class="message-time">00:00</div>
                            </div>
                        </div>
                        <div class="chat-input-container">
                            <input type="text" class="chat-input" id="chatInput" placeholder="Masukan Teks...">
                            <button class="chat-send-btn" id="chatSendBtn">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- INBOX -->
            <section id="inboxPage" class="page">
                <div class="card">
                    <h2 class="card-title"><i class="fas fa-envelope"></i> Inbox</h2>
                    
                    <div class="inbox-tabs">
                        <div class="inbox-tab active" data-tab="messages">Pesan</div>
                        <div class="inbox-tab" data-tab="activities">Riwayat Aktivitas</div>
                    </div>
                    
                    <div class="inbox-content active" id="messagesContent">
                        <div class="inbox-messages" id="inboxMessages">
                            <!-- Pesan akan diisi oleh JavaScript -->
                        </div>
                        <div class="inbox-message-detail" id="messageDetail">
                            <!-- Detail pesan akan diisi oleh JavaScript -->
                        </div>
                    </div>
                    
                    <div class="inbox-content" id="activitiesContent">
                        <div class="activity-list" id="activityList">
                            <!-- Riwayat aktivitas akan diisi oleh JavaScript -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- PROFIL -->
            <section id="profilePage" class="page">
                <div class="card">
                    <h2 class="card-title"><i class="fas fa-user"></i> Profil Pengguna</h2>
                    <div class="profile-section">
                        <div class="profile-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <h2 class="profile-name" id="profileName">Nama Pengguna</h2>
                        <div class="profile-rank" id="profileRank">Newbie</div>
                        
                        <div class="profile-stats">
                            <div class="stat-card">
                                <div class="stat-value" id="commentsCount">0</div>
                                <div class="stat-label">Komentar</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="ratingsCount">0</div>
                                <div class="stat-label">Rating Diberikan</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="joinDate">-</div>
                                <div class="stat-label">Bergabung</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="lastLogin">-</div>
                                <div class="stat-label">Login Terakhir</div>
                            </div>
                        </div>
                        
                        <div class="mt-20">
                            <button class="btn btn-primary" id="changeNameBtn">Ganti Nama</button>
                            <button class="btn btn-secondary" id="logoutBtn">Keluar</button>
                        </div>
                    </div>

                    <!-- User Management Section (Hanya untuk Owner) -->
                    <div class="user-management hidden" id="userManagement">
                        <h3 class="user-management-title"><i class="fas fa-users-cog"></i> Manajemen Pengguna</h3>
                        <p>Kelola semua pengguna yang terdaftar di FurinaSite. Hati-hati saat menghapus pengguna karena tindakan ini tidak dapat dibatalkan.</p>
                        
                        <div class="users-list" id="usersList">
                            <!-- Daftar pengguna akan diisi oleh JavaScript -->
                        </div>
                        
                        <!-- Tombol Reset Data (Hanya untuk Owner) -->
                        <div class="mt-20">
                            <button class="btn btn-danger" id="resetDataBtn">Reset Data (Debug)</button>
                        </div>
                    </div>

                    <!-- Order Management Section (Hanya untuk Admin/Owner) -->
                    <div class="user-management hidden" id="orderManagement">
                        <h3 class="user-management-title"><i class="fas fa-shopping-cart"></i> Manajemen Pesanan</h3>
                        <p>Kelola semua pesanan yang masuk dari pengguna.</p>
                        
                        <div class="orders-list" id="ordersList">
                            <!-- Daftar pesanan akan diisi oleh JavaScript -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- BANTUAN -->
            <section id="helpPage" class="page">
                <div class="card">
                    <h2 class="card-title"><i class="fas fa-question-circle"></i> Pusat Bantuan</h2>
                    <p>Jika Anda mengalami kendala atau memiliki pertanyaan, silakan hubungi kami:</p>
                    
                    <div class="mt-20">
                        <h3>FAQ (Pertanyaan Umum)</h3>
                        <div style="margin-top: 15px;">
                            <div class="faq-item" style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color);">
                                <h4>Bagaimana cara login?</h4>
                                <p>Klik tombol "Masuk" di pojok kanan atas, kemudian isi nama pengguna dan kata sandi Anda.</p>
                            </div>
                            <div class="faq-item" style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color);">
                                <h4>Bagaimana cara mendaftar?</h4>
                                <p>Klik tombol "Masuk" di pojok kanan atas, kemudian klik tombol "Daftar" dan isi formulir pendaftaran dengan nama pengguna dan kata sandi.</p>
                            </div>
                            <div class="faq-item" style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color);">
                                <h4>Apakah data saya aman?</h4>
                                <p>Ya, kami menggunakan enkripsi untuk melindungi data pengguna. Namun, pastikan untuk tidak membagikan informasi login Anda.</p>
                            </div>
                            <div class="faq-item" style="margin-bottom: 15px;">
                                <h4>Bagaimana cara mengganti tema?</h4>
                                <p>Klik ikon bulan/matahari di pojok kanan atas untuk mengganti antara tema terang dan gelap.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- FOOTER -->
    <footer>
        <div class="container footer-content">
            <div class="copyright">
                &copy; 2025-2026 FurinaSite. Semua hak dilindungi.
            </div>
            <div>
                Jangan Lupa Support Kami YahðŸ˜‰
            </div>
        </div>
    </footer>

    <!-- MUSIC PLAYER -->
    <div class="music-player hidden" id="musicPlayer">
        <div class="music-info">
            <div class="music-title">Golden Hour</div>
            <div class="music-artist">JVKE</div>
            <div class="music-progress">
                <div class="music-progress-bar" id="musicProgressBar"></div>
            </div>
        </div>
        <div class="music-controls">
            <button class="music-btn" id="musicPrev">
                <i class="fas fa-step-backward"></i>
            </button>
            <button class="music-btn" id="musicPlay">
                <i class="fas fa-play"></i>
            </button>
            <button class="music-btn" id="musicNext">
                <i class="fas fa-step-forward"></i>
            </button>
            <button class="music-btn" id="musicYoutube">
                <i class="fab fa-youtube"></i>
            </button>
        </div>
        <audio id="audioElement" loop>
            <source src="https://files.catbox.moe/crj2ga.mp3" type="audio/mpeg">
            Browser Anda tidak mendukung elemen audio.
        </audio>
    </div>

    <!-- YOUTUBE MUSIC PLAYER -->
    <div class="youtube-music-player hidden" id="youtubeMusicPlayer">
        <div class="youtube-header">
            <div class="youtube-title">Putar Lagu Favoritmu</div>
            <button class="youtube-close" id="youtubeClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="youtube-input-container">
            <input type="text" class="youtube-input" id="youtubeInput" placeholder="Masukkan link YouTube...">
            <button class="youtube-add-btn" id="youtubeAddBtn">Tambah</button>
        </div>
        <div class="youtube-playlist" id="youtubePlaylist">
            <!-- Daftar lagu akan diisi oleh JavaScript -->
        </div>
        <div class="youtube-audio-controls">
            <button class="youtube-audio-btn" id="youtubePrevBtn">
                <i class="fas fa-step-backward"></i>
            </button>
            <button class="youtube-audio-btn play-pause" id="youtubePlayPauseBtn">
                <i class="fas fa-play"></i>
            </button>
            <button class="youtube-audio-btn" id="youtubeNextBtn">
                <i class="fas fa-step-forward"></i>
            </button>
        </div>
        <div class="youtube-audio-progress">
            <div class="youtube-audio-progress-bar" id="youtubeProgressBar"></div>
        </div>
    </div>

    <!-- MODAL LOGIN/REGISTER -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="authModalTitle">Masuk</h3>
                <button class="modal-close" id="authModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="authForm">
                <div class="form-group">
                    <label class="form-label" for="username">Nama Pengguna</label>
                    <input type="text" class="form-input" id="username" placeholder="Username" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="password">Kata Sandi</label>
                    <input type="password" class="form-input" id="password" required>
                </div>
                <div class="form-group" id="confirmPasswordGroup" style="display: none;">
                    <label class="form-label" for="confirmPassword">Konfirmasi Kata Sandi</label>
                    <input type="password" class="form-input" id="confirmPassword">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="authSwitchBtn">Daftar</button>
                    <button type="submit" class="btn btn-primary" id="authSubmitBtn">Masuk</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL TAMBAH/EDIT PRODUK -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="productModalTitle">Tambah Produk</h3>
                <button class="modal-close" id="productModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="productForm">
                <div class="form-group">
                    <label class="form-label" for="productName">Nama Produk</label>
                    <input type="text" class="form-input" id="productName" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="productImageUrl">Gambar Produk Opsional (support jpg/png/jpeg)</label>
                    <input type="url" class="form-input" id="productImageUrl" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-group">
                    <label class="form-label" for="productPrice">Harga</label>
                    <input type="number" class="form-input" id="productPrice" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="productOriginalPrice">Harga Asli (untuk diskon)</label>
                    <input type="number" class="form-input" id="productOriginalPrice">
                </div>
                <div class="form-group">
                    <label class="form-label" for="productStock">Stok (isi "unlimited" untuk stok tak terbatas)</label>
                    <input type="text" class="form-input" id="productStock" value="unlimited">
                </div>
                <div class="form-group">
                    <label class="form-label" for="productDescription">Deskripsi</label>
                    <textarea class="form-input" id="productDescription" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="productCancelBtn">Batal</button>
                    <button type="submit" class="btn btn-primary" id="productSubmitBtn">Simpan</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL EDIT PEMBAYARAN -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Edit Metode Pembayaran</h3>
                <button class="modal-close" id="paymentModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="form-group">
                <label class="form-label">Metode Pembayaran Tersedia</label>
                <div id="paymentCheckboxes">
                    <!-- Checkbox metode pembayaran akan diisi oleh JavaScript -->
                </div>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="paymentCancelBtn">Batal</button>
                <button type="button" class="btn btn-primary" id="paymentSaveBtn">Simpan</button>
            </div>
        </div>
    </div>

    <!-- MODAL PEMBAYARAN -->
    <div class="modal" id="paymentDetailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="paymentDetailTitle">Pembayaran</h3>
                <button class="modal-close" id="paymentDetailClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="payment-detail">
                <p>Silakan transfer ke nomor berikut:</p>
                <div class="payment-number" id="paymentNumber">085933452952</div>
                <p>Atas nama: <strong>Admin FurinaSite</strong></p>
                <button class="copy-btn" id="copyPaymentBtn">
                    <i class="fas fa-copy"></i> Salin Nomor
                </button>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="paymentDetailCancelBtn">Batal</button>
                <a href="https://wa.me/6285933452952" target="_blank" class="btn btn-primary" id="confirmPaymentBtn">
                    <i class="fab fa-whatsapp"></i> Konfirmasi via WhatsApp
                </a>
            </div>
        </div>
    </div>

    <!-- MODAL GANTI NAMA -->
    <div class="modal" id="changeNameModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Ganti Nama</h3>
                <button class="modal-close" id="changeNameModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="changeNameForm">
                <div class="form-group">
                    <label class="form-label" for="newUsername">Nama Baru</label>
                    <input type="text" class="form-input" id="newUsername" required>
                </div>
                <div class="form-group">
                    <p id="changeNameInfo">Anda memiliki <span id="freeChangesLeft">1</span> perubahan nama gratis tersisa.</p>
                    <p id="changeNameCooldown" style="display: none;">Waktu tunggu untuk ganti nama berikutnya: <span id="cooldownTime">7 hari</span></p>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="changeNameCancelBtn">Batal</button>
                    <button type="submit" class="btn btn-primary" id="changeNameSubmitBtn">Ganti Nama</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL BELI PRODUK -->
    <div class="modal" id="buyProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="buyProductTitle">Beli Produk</h3>
                <button class="modal-close" id="buyProductModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="buyProductForm">
                <div class="form-group">
                    <label class="form-label" for="customerName">Nama Lengkap</label>
                    <input type="text" class="form-input" id="customerName" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="customerWa">Nomor WhatsApp</label>
                    <input type="text" class="form-input" id="customerWa" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="customerNote">Catatan Tambahan (opsional)</label>
                    <textarea class="form-input" id="customerNote" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Metode Pembayaran</label>
                    <div id="buyPaymentMethods">
                        <!-- Metode pembayaran akan diisi oleh JavaScript -->
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="buyProductCancelBtn">Batal</button>
                    <button type="submit" class="btn btn-primary" id="buyProductSubmitBtn">Pesan Sekarang</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL KIRIM PENGUMUMAN -->
    <div class="modal" id="announcementModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Kirim Pengumuman</h3>
                <button class="modal-close" id="announcementModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="announcementForm">
                <div class="form-group">
                    <label class="form-label" for="announcementTitle">Judul Pengumuman</label>
                    <input type="text" class="form-input" id="announcementTitle" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="announcementContent">Isi Pengumuman</label>
                    <textarea class="form-input" id="announcementContent" rows="5" required></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Target Pengumuman</label>
                    <div>
                        <label style="display: flex; align-items: center; margin-bottom: 10px;">
                            <input type="radio" name="announcementTarget" value="all" checked style="margin-right: 10px;">
                            Semua Pengguna
                        </label>
                        <label style="display: flex; align-items: center;">
                            <input type="radio" name="announcementTarget" value="specific" style="margin-right: 10px;">
                            Pengguna Tertentu
                        </label>
                    </div>
                    <div id="specificUserGroup" style="display: none; margin-top: 10px;">
                        <select class="form-input" id="specificUser">
                            <!-- Opsi pengguna akan diisi oleh JavaScript -->
                        </select>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="announcementCancelBtn">Batal</button>
                    <button type="submit" class="btn btn-primary" id="announcementSubmitBtn">Kirim Pengumuman</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL RESET DATA -->
    <div class="modal" id="resetDataModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" style="color: var(--danger-color);">Reset Data</h3>
                <button class="modal-close" id="resetDataModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="form-group">
                <p>Anda akan menghapus semua data. Tindakan ini tidak dapat dibatalkan!</p>
                <p>Ketik <strong>"reset"</strong> untuk konfirmasi:</p>
                <input type="text" class="form-input" id="resetConfirmInput" placeholder="Ketik reset di sini...">
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="resetDataCancelBtn">Batal</button>
                <button type="button" class="btn btn-danger" id="resetDataConfirmBtn" disabled>Reset Data</button>
            </div>
        </div>
    </div>

    <!-- YouTube Audio Player (Hidden) -->
    <div id="youtubeAudioPlayer" style="display: none;"></div>

    <script>
        // DATA APLIKASI
        let appData = {
            currentUser: null,
            isLoggedIn: false,
            isAdmin: false,
            isOwner: false,
            currentPage: 'home',
            theme: 'light',
            musicPlaying: false,
            currentRating: 0,
            editingProductId: null,
            selectedPaymentMethod: null,
            audio: null,
            commentRating: 0,
            currentOrder: null,
            youtubePlayer: null,
            currentYoutubeIndex: -1,
            youtubePlaylist: [],
            isYoutubePlaying: false
        };

        // DATA CONTOH - RESET SEMUA DATA
        let users = JSON.parse(localStorage.getItem('users')) || [
            { 
                username: 'Sorveign', 
                password: 'owner123', 
                rank: 'owner',
                joinDate: '2023-01-01', 
                lastLogin: null,
                lastUsernameChange: null,
                freeNameChangeUsed: false,
                youtubePlaylist: []
            },
            { 
                username: 'admin', 
                password: 'admin123', 
                rank: 'admin',
                joinDate: '2023-01-01', 
                lastLogin: null,
                lastUsernameChange: null,
                freeNameChangeUsed: false,
                youtubePlaylist: []
            }
        ];

        let products = JSON.parse(localStorage.getItem('products')) || [
            { 
                id: 1, 
                name: 'Top Up Diamond MLBB', 
                price: 10000, 
                originalPrice: 15000, 
                stock: 'unlimited', 
                description: 'Top up diamond Mobile Legends',
                imageUrl: '' 
            },
            { 
                id: 2, 
                name: 'Joki Rank MLBB', 
                price: 50000, 
                originalPrice: 75000, 
                stock: 10, 
                description: 'Jasa joki rank Mobile Legends',
                imageUrl: '' 
            },
            { 
                id: 3, 
                name: 'Akun MLBB Siap Pakai', 
                price: 150000, 
                originalPrice: 200000, 
                stock: 5, 
                description: 'Akun MLBB dengan hero dan skin lengkap',
                imageUrl: '' 
            }
        ];

        let comments = JSON.parse(localStorage.getItem('comments')) || [];

        let ratings = JSON.parse(localStorage.getItem('ratings')) || [];

        let paymentMethods = JSON.parse(localStorage.getItem('paymentMethods')) || [
            { id: 1, name: 'DANA', enabled: true },
            { id: 2, name: 'GoPay', enabled: true },
            { id: 3, name: 'OVO', enabled: false },
            { id: 4, name: 'LinkAja', enabled: false }
        ];

        let chatMessages = JSON.parse(localStorage.getItem('chatMessages')) || [
            { 
                id: 1, 
                sender: 'System', 
                content: 'Selamat datang di chat room publik! Semua pesan dapat dilihat oleh pengguna lain.', 
                time: '10:00', 
                type: 'received',
                rank: 'owner'
            }
        ];

        // DATA BARU: PESAN, PESANAN, DAN AKTIVITAS
        let messages = JSON.parse(localStorage.getItem('messages')) || [
            {
                id: 1,
                title: 'Selamat Datang di FurinaSite!',
                content: 'Terima kasih telah bergabung dengan FurinaSite. Kami harap Anda menikmati pengalaman menggunakan website kami. Jika ada pertanyaan, jangan ragu untuk menghubungi kami.',
                sender: 'Sistem',
                senderRank: 'owner',
                target: 'all',
                date: new Date().toISOString(),
                read: false
            }
        ];

        let orders = JSON.parse(localStorage.getItem('orders')) || [];

        let activities = JSON.parse(localStorage.getItem('activities')) || [];

        // INISIALISASI APLIKASI
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            updateTime();
            setInterval(updateTime, 1000);
            loadPage('home');
            renderChatMessages();
            
            // Update profile icon based on login status
updateProfileIcon();
            
            // Load YouTube playlist from current user
            if (appData.isLoggedIn && appData.currentUser && appData.currentUser.youtubePlaylist) {
                appData.youtubePlaylist = appData.currentUser.youtubePlaylist;
                renderYoutubePlaylist();
            }
        });

        // FUNGSI INISIALISASI
        function initializeApp() {
            // Cek apakah ada user yang sudah login
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                appData.currentUser = JSON.parse(savedUser);
                appData.isLoggedIn = true;
                
                // PERBAIKAN: Gunakan pengecekan yang lebih robust untuk rank
                const userRank = appData.currentUser.rank.toLowerCase();
                appData.isAdmin = userRank.includes('owner') || userRank.includes('admin');
                appData.isOwner = userRank.includes('owner');
                
                updateUIAfterLogin();
            }
            
            // Cek tema yang disimpan
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                appData.theme = savedTheme;
                document.body.classList.toggle('dark-theme', savedTheme === 'dark');
                updateThemeIcon();
            }
            
            // Render data awal
            renderProducts();
            renderComments();
            renderPaymentMethods();
            updateRatingDisplay();
            updateTotalUsers();
        }

        // SETUP EVENT LISTENERS
        function setupEventListeners() {
            // Navigasi
            document.getElementById('menuToggle').addEventListener('click', toggleSidebar);
            document.getElementById('sidebarClose').addEventListener('click', toggleSidebar);
            document.getElementById('overlay').addEventListener('click', toggleSidebar);
            
            // Tautan navigasi
            document.querySelectorAll('a[data-page]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.getAttribute('data-page');
                    loadPage(page);
                });
            });
            
            // Toggle tema
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            
            // Toggle musik
            document.getElementById('musicToggle').addEventListener('click', toggleMusic);
            
            // Kontrol musik
            document.getElementById('musicPlay').addEventListener('click', toggleMusicPlayback);
            document.getElementById('musicPrev').addEventListener('click', prevMusic);
            document.getElementById('musicNext').addEventListener('click', nextMusic);
            document.getElementById('musicYoutube').addEventListener('click', toggleYoutubePlayer);
            
            // YouTube player
            document.getElementById('youtubeClose').addEventListener('click', toggleYoutubePlayer);
            document.getElementById('youtubeAddBtn').addEventListener('click', addYoutubeSong);
            
            // YouTube audio controls
            document.getElementById('youtubePrevBtn').addEventListener('click', prevYoutubeSong);
            document.getElementById('youtubePlayPauseBtn').addEventListener('click', toggleYoutubePlayback);
            document.getElementById('youtubeNextBtn').addEventListener('click', nextYoutubeSong);
            
            // Modal login/register
            document.getElementById('loginBtn').addEventListener('click', showAuthModal);
            document.getElementById('authModalClose').addEventListener('click', hideAuthModal);
            document.getElementById('authSwitchBtn').addEventListener('click', switchAuthMode);
            document.getElementById('authForm').addEventListener('submit', handleAuth);
            
            // Modal produk
            document.getElementById('addProductBtn').addEventListener('click', showProductModal);
            document.getElementById('productModalClose').addEventListener('click', hideProductModal);
            document.getElementById('productCancelBtn').addEventListener('click', hideProductModal);
            document.getElementById('productForm').addEventListener('submit', handleProductSubmit);
            
            // Modal pembayaran
            document.getElementById('editPaymentBtn').addEventListener('click', showPaymentModal);
            document.getElementById('paymentModalClose').addEventListener('click', hidePaymentModal);
            document.getElementById('paymentCancelBtn').addEventListener('click', hidePaymentModal);
            document.getElementById('paymentSaveBtn').addEventListener('click', savePaymentMethods);
            
            // Komentar
            document.getElementById('commentInput').addEventListener('input', toggleCommentSubmit);
            document.getElementById('commentSubmit').addEventListener('click', submitComment);
            
            // Bintang rating komentar
            document.querySelectorAll('.comment-rating-star').forEach(star => {
                star.addEventListener('click', function() {
                    const value = parseInt(this.getAttribute('data-value'));
                    setCommentRating(value);
                });
            });
            
            // Pembayaran
            document.getElementById('copyPaymentBtn').addEventListener('click', copyPaymentNumber);
            document.getElementById('paymentDetailClose').addEventListener('click', hidePaymentDetailModal);
            document.getElementById('paymentDetailCancelBtn').addEventListener('click', hidePaymentDetailModal);
            
            // Live Chat
            document.getElementById('chatSendBtn').addEventListener('click', sendChatMessage);
            document.getElementById('chatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendChatMessage();
                }
            });
            
            // Ganti nama
            document.getElementById('changeNameBtn').addEventListener('click', showChangeNameModal);
            document.getElementById('changeNameModalClose').addEventListener('click', hideChangeNameModal);
            document.getElementById('changeNameCancelBtn').addEventListener('click', hideChangeNameModal);
            document.getElementById('changeNameForm').addEventListener('submit', handleChangeName);
            
            // Logout
            document.getElementById('logoutBtn').addEventListener('click', logout);
            
            // Inbox tabs
            document.querySelectorAll('.inbox-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchInboxTab(tabName);
                });
            });
            
            // Kirim pengumuman
            document.getElementById('sendAnnouncementBtn').addEventListener('click', showAnnouncementModal);
            document.getElementById('announcementModalClose').addEventListener('click', hideAnnouncementModal);
            document.getElementById('announcementCancelBtn').addEventListener('click', hideAnnouncementModal);
            document.getElementById('announcementForm').addEventListener('submit', handleAnnouncement);
            
            // Target pengumuman
            document.querySelectorAll('input[name="announcementTarget"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const specificUserGroup = document.getElementById('specificUserGroup');
                    if (this.value === 'specific') {
                        specificUserGroup.style.display = 'block';
                        renderSpecificUserOptions();
                    } else {
                        specificUserGroup.style.display = 'none';
                    }
                });
            });
            
            // Beli produk
            document.getElementById('buyProductModalClose').addEventListener('click', hideBuyProductModal);
            document.getElementById('buyProductCancelBtn').addEventListener('click', hideBuyProductModal);
            document.getElementById('buyProductForm').addEventListener('submit', handleBuyProduct);
            
            // Reset data
            document.getElementById('resetDataBtn').addEventListener('click', showResetDataModal);
            document.getElementById('resetDataModalClose').addEventListener('click', hideResetDataModal);
            document.getElementById('resetDataCancelBtn').addEventListener('click', hideResetDataModal);
            document.getElementById('resetConfirmInput').addEventListener('input', toggleResetDataConfirm);
            document.getElementById('resetDataConfirmBtn').addEventListener('click', resetData);
        }

// FUNGSI WAKTU REAL-TIME
function updateTime() {
    const now = new Date();
    
    // Format waktu
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    const seconds = String(now.getSeconds()).padStart(2, '0');
    const timeString = `${hours}:${minutes}:${seconds}`;
    
    // Format tanggal
    const days = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
    const months = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
    
    const dayName = days[now.getDay()];
    const date = now.getDate();
    const monthName = months[now.getMonth()];
    const year = now.getFullYear();
    
    const dateString = `${dayName}, ${date} ${monthName} ${year}`;
    
    // TAMBAHAN BARU - Tentukan periode waktu dan emoji
    let periodText = '';
    let periodEmoji = '';
    const hour = now.getHours();
    
    if (hour >= 5 && hour < 10) {
        periodText = 'Pagi';
        periodEmoji = 'ðŸŒ…';
    } else if (hour >= 10 && hour < 15) {
        periodText = 'Siang';
        periodEmoji = 'ðŸ™ï¸';
    } else if (hour >= 15 && hour < 18) {
        periodText = 'Sore';
        periodEmoji = 'ðŸŒ‡';
    } else if (hour >= 18 && hour < 24) {
        periodText = 'Malam';
        periodEmoji = 'ðŸŒ†';
    } else {
        periodText = 'Dini Hari';
        periodEmoji = 'ðŸŒƒ';
    }
    
    // Update tampilan
    document.getElementById('timeDisplay').textContent = timeString;
    document.getElementById('dateDisplay').textContent = dateString;
    
    // TAMBAHAN BARU - Update periode waktu
    document.getElementById('timePeriodText').textContent = periodText;
    document.getElementById('timePeriodEmoji').textContent = periodEmoji;
}

        // FUNGSI SIDEBAR
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
            document.getElementById('overlay').classList.toggle('active');
        }

        // FUNGSI TEMA
        function toggleTheme() {
            appData.theme = appData.theme === 'light' ? 'dark' : 'light';
            document.body.classList.toggle('dark-theme', appData.theme === 'dark');
            localStorage.setItem('theme', appData.theme);
            updateThemeIcon();
        }

        function updateThemeIcon() {
            const icon = document.querySelector('#themeToggle i');
            icon.className = appData.theme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
        }

        // FUNGSI MUSIK
        function toggleMusic() {
            if (!appData.isLoggedIn) {
                alert('Anda harus login untuk memutar musik');
                return;
            }
            
            const musicPlayer = document.getElementById('musicPlayer');
            appData.musicPlaying = !appData.musicPlaying;
            
            if (appData.musicPlaying) {
                musicPlayer.classList.remove('hidden');
            } else {
                musicPlayer.classList.add('hidden');
            }
        }

        function toggleMusicPlayback() {
            const audio = document.getElementById('audioElement');
            const playBtn = document.getElementById('musicPlay');
            
            if (audio.paused) {
                audio.play().then(() => {
                    playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                }).catch(error => {
                    console.error('Gagal memutar audio:', error);
                    alert('Gagal memutar musik. Pastikan browser mendukung audio.');
                });
            } else {
                audio.pause();
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
            }
        }

        function prevMusic() {
            alert('Fitur musik sedang dalam pengembangan');
        }

        function nextMusic() {
            alert('Putar lagu favoritmu sendiri lewat url YouTube');
            toggleYoutubePlayer();
        }

        // FUNGSI YOUTUBE PLAYER
        function toggleYoutubePlayer() {
            if (!appData.isLoggedIn) {
                alert('Anda harus login untuk menggunakan fitur YouTube');
                return;
            }
            
            const youtubePlayer = document.getElementById('youtubeMusicPlayer');
            youtubePlayer.classList.toggle('hidden');
            
            if (!youtubePlayer.classList.contains('hidden')) {
                renderYoutubePlaylist();
            } else {
                // Tidak menghentikan audio YouTube saat menutup player
                // Biarkan audio tetap berjalan di background
            }
        }

        function renderYoutubePlaylist() {
            const youtubePlaylist = document.getElementById('youtubePlaylist');
            youtubePlaylist.innerHTML = '';
            
            if (appData.youtubePlaylist.length === 0) {
                youtubePlaylist.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 10px;">Belum ada lagu di playlist</p>';
                return;
            }
            
            appData.youtubePlaylist.forEach((song, index) => {
                const songElement = document.createElement('div');
                songElement.className = 'youtube-song';
                
                // Tandai lagu yang sedang diputar
                const isPlaying = index === appData.currentYoutubeIndex;
                
                songElement.innerHTML = `
                    <div class="youtube-song-title" style="${isPlaying ? 'font-weight: bold; color: var(--primary-color);' : ''}">
                        ${song.title || 'Lagu YouTube'} ${isPlaying ? ' (Sedang Diputar)' : ''}
                    </div>
                    <div class="youtube-song-actions">
                        <button class="youtube-play-btn" data-index="${index}">
                            <i class="fas fa-${isPlaying ? 'pause' : 'play'}"></i>
                        </button>
                        <button class="youtube-delete-btn" data-index="${index}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                youtubePlaylist.appendChild(songElement);
            });
            
            // Tambahkan event listener untuk tombol play dan delete
            document.querySelectorAll('.youtube-play-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    playYoutubeSong(index);
                });
            });
            
            document.querySelectorAll('.youtube-delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    deleteYoutubeSong(index);
                });
            });
        }

        function addYoutubeSong() {
            const youtubeInput = document.getElementById('youtubeInput');
            const url = youtubeInput.value.trim();
            
            if (!url) {
                alert('Masukkan link YouTube terlebih dahulu');
                return;
            }
            
            // Validasi URL YouTube
            const youtubeRegex = /^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.?be)\/.+$/;
            if (!youtubeRegex.test(url)) {
                alert('Masukkan link YouTube yang valid');
                return;
            }
            
            // Cek apakah playlist sudah penuh (maks 10 lagu)
            if (appData.youtubePlaylist.length >= 10) {
                alert('Playlist sudah penuh (maksimal 10 lagu)');
                return;
            }
            
            // Tambahkan lagu ke playlist
            const newSong = {
                url: url,
                title: 'Lagu YouTube ' + (appData.youtubePlaylist.length + 1)
            };
            
            appData.youtubePlaylist.push(newSong);
            
            // Update di localStorage
            if (appData.currentUser) {
                appData.currentUser.youtubePlaylist = appData.youtubePlaylist;
                const userIndex = users.findIndex(u => u.username === appData.currentUser.username);
                if (userIndex !== -1) {
                    users[userIndex] = appData.currentUser;
                    localStorage.setItem('users', JSON.stringify(users));
                    localStorage.setItem('currentUser', JSON.stringify(appData.currentUser));
                }
            }
            
            // Reset input dan render ulang playlist
            youtubeInput.value = '';
            renderYoutubePlaylist();
            
            // Jika ini lagu pertama, langsung putar
            if (appData.youtubePlaylist.length === 1) {
                playYoutubeSong(0);
            }
            
            alert('Lagu berhasil ditambahkan ke playlist!');
        }

        function playYoutubeSong(index) {
            if (index < 0 || index >= appData.youtubePlaylist.length) return;
            
            const song = appData.youtubePlaylist[index];
            
            // Jika lagu yang sama sedang diputar, toggle pause/play
            if (index === appData.currentYoutubeIndex) {
                toggleYoutubePlayback();
                return;
            }
            
            // Hentikan lagu sebelumnya jika ada
            if (appData.youtubePlayer) {
                appData.youtubePlayer.pauseVideo();
            }
            
            // Set lagu yang sedang diputar
            appData.currentYoutubeIndex = index;
            
            // Ekstrak video ID dari URL YouTube
            const videoId = extractYouTubeId(song.url);
            if (!videoId) {
                alert('Link YouTube tidak valid');
                return;
            }
            
            // Buat atau perbarui player YouTube
            const playerContainer = document.getElementById('youtubeAudioPlayer');
            
            // Hapus player lama jika ada
            if (appData.youtubePlayer) {
                appData.youtubePlayer.destroy();
            }
            
            // Buat player baru
            appData.youtubePlayer = new YT.Player('youtubeAudioPlayer', {
                height: '0',
                width: '0',
                videoId: videoId,
                playerVars: {
                    'autoplay': 1,
                    'controls': 0,
                    'disablekb': 1,
                    'fs': 0,
                    'iv_load_policy': 3,
                    'modestbranding': 1,
                    'playsinline': 1,
                    'rel': 0,
                    'showinfo': 0
                },
                events: {
                    'onReady': onYouTubePlayerReady,
                    'onStateChange': onYouTubePlayerStateChange,
                    'onError': onYouTubePlayerError
                }
            });
            
            // Update UI
            renderYoutubePlaylist();
            updateYoutubePlayPauseButton(true);
        }

        function onYouTubePlayerReady(event) {
            // Player siap, tidak perlu melakukan apa-apa
        }

        function onYouTubePlayerStateChange(event) {
            // Update progress bar
            if (event.data === YT.PlayerState.PLAYING) {
                updateYoutubeProgressBar();
            }
            
            // Update play/pause button
            if (event.data === YT.PlayerState.PLAYING) {
                updateYoutubePlayPauseButton(true);
            } else if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
                updateYoutubePlayPauseButton(false);
            }
            
            // Jika lagu selesai, putar lagu berikutnya
            if (event.data === YT.PlayerState.ENDED) {
                nextYoutubeSong();
            }
        }

        function onYouTubePlayerError(event) {
            console.error('YouTube Player Error:', event.data);
            alert('Terjadi error saat memutar lagu. Coba lagu lain.');
            nextYoutubeSong();
        }

        function updateYoutubeProgressBar() {
            if (!appData.youtubePlayer || appData.youtubePlayer.getPlayerState() !== YT.PlayerState.PLAYING) {
                return;
            }
            
            const currentTime = appData.youtubePlayer.getCurrentTime();
            const duration = appData.youtubePlayer.getDuration();
            const progress = (currentTime / duration) * 100;
            
            document.getElementById('youtubeProgressBar').style.width = progress + '%';
            
            // Update setiap 100ms
            setTimeout(updateYoutubeProgressBar, 100);
        }

        function updateYoutubePlayPauseButton(isPlaying) {
            const button = document.getElementById('youtubePlayPauseBtn');
            button.innerHTML = isPlaying ? '<i class="fas fa-pause"></i>' : '<i class="fas fa-play"></i>';
            appData.isYoutubePlaying = isPlaying;
        }

        function toggleYoutubePlayback() {
            if (!appData.youtubePlayer) return;
            
            if (appData.isYoutubePlaying) {
                appData.youtubePlayer.pauseVideo();
            } else {
                appData.youtubePlayer.playVideo();
            }
        }

        function prevYoutubeSong() {
            if (appData.youtubePlaylist.length === 0) return;
            
            let newIndex = appData.currentYoutubeIndex - 1;
            if (newIndex < 0) {
                newIndex = appData.youtubePlaylist.length - 1; // Putar dari akhir
            }
            
            playYoutubeSong(newIndex);
        }

        function nextYoutubeSong() {
            if (appData.youtubePlaylist.length === 0) return;
            
            let newIndex = appData.currentYoutubeIndex + 1;
            if (newIndex >= appData.youtubePlaylist.length) {
                newIndex = 0; // Putar dari awal
            }
            
            playYoutubeSong(newIndex);
        }

        function deleteYoutubeSong(index) {
            if (confirm('Apakah Anda yakin ingin menghapus lagu ini dari playlist?')) {
                // Hentikan lagu jika yang dihapus sedang diputar
                if (index === appData.currentYoutubeIndex) {
                    if (appData.youtubePlayer) {
                        appData.youtubePlayer.stopVideo();
                        appData.youtubePlayer.destroy();
                        appData.youtubePlayer = null;
                    }
                    appData.currentYoutubeIndex = -1;
                    updateYoutubePlayPauseButton(false);
                }
                
                // Hapus lagu dari playlist
                appData.youtubePlaylist.splice(index, 1);
                
                // Perbarui current index jika perlu
                if (appData.currentYoutubeIndex >= index) {
                    appData.currentYoutubeIndex--;
                }
                
                // Update di localStorage
                if (appData.currentUser) {
                    appData.currentUser.youtubePlaylist = appData.youtubePlaylist;
                    const userIndex = users.findIndex(u => u.username === appData.currentUser.username);
                    if (userIndex !== -1) {
                        users[userIndex] = appData.currentUser;
                        localStorage.setItem('users', JSON.stringify(users));
                        localStorage.setItem('currentUser', JSON.stringify(appData.currentUser));
                    }
                }
                
                renderYoutubePlaylist();
                alert('Lagu berhasil dihapus dari playlist!');
            }
        }

        function extractYouTubeId(url) {
            const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[7].length === 11) ? match[7] : false;
        }

        // FUNGSI NAVIGASI HALAMAN
        function loadPage(page) {
            // Sembunyikan semua halaman
            document.querySelectorAll('.page').forEach(p => {
                p.classList.remove('active');
            });
            
            // Hapus kelas active dari semua menu
            document.querySelectorAll('.nav-links a, .sidebar-menu a').forEach(link => {
                link.classList.remove('active');
            });
            
            // Tampilkan halaman yang dipilih
            document.getElementById(`${page}Page`).classList.add('active');
            appData.currentPage = page;
            
            // Tandai menu yang aktif
            document.querySelectorAll(`a[data-page="${page}"]`).forEach(link => {
                link.classList.add('active');
            });
            
            // Perbarui UI berdasarkan halaman
            if (page === 'home') {
                updateWelcomeMessage();
            } else if (page === 'profile') {
                loadProfileData();
            } else if (page === 'chat') {
                renderChatMessages();
            } else if (page === 'inbox') {
                loadInboxData();
            }
            
            // Sembunyikan sidebar jika terbuka
            if (document.getElementById('sidebar').classList.contains('active')) {
                toggleSidebar();
            }
        }

        // FUNGSI INBOX
        function loadInboxData() {
            if (!appData.isLoggedIn) {
                alert('Anda harus login untuk melihat inbox');
                loadPage('home');
                return;
            }
            
            renderInboxMessages();
            renderActivities();
        }

        function switchInboxTab(tabName) {
            // Sembunyikan semua konten tab
            document.querySelectorAll('.inbox-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Hapus kelas active dari semua tab
            document.querySelectorAll('.inbox-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Tampilkan tab yang dipilih
            document.getElementById(`${tabName}Content`).classList.add('active');
            document.querySelector(`.inbox-tab[data-tab="${tabName}"]`).classList.add('active');
        }

        function renderInboxMessages() {
            const inboxMessages = document.getElementById('inboxMessages');
            inboxMessages.innerHTML = '';
            
            // Filter pesan yang ditujukan ke user saat ini
            const userMessages = messages.filter(msg => 
                msg.target === 'all' || 
                msg.target === appData.currentUser.username ||
                (Array.isArray(msg.target) && msg.target.includes(appData.currentUser.username))
            );
            
            if (userMessages.length === 0) {
                inboxMessages.innerHTML = '<p class="text-center" style="padding: 20px; color: var(--text-secondary);">Tidak ada pesan</p>';
                return;
            }
            
            userMessages.forEach(message => {
                const messageElement = document.createElement('div');
                messageElement.className = `inbox-message ${message.read ? '' : 'unread'}`;
                messageElement.setAttribute('data-id', message.id);
                
                messageElement.innerHTML = `
                    <div class="inbox-message-header">
                        <div class="inbox-message-title">${message.title}</div>
                        <div class="inbox-message-date">${formatDate(message.date)}</div>
                    </div>
                    <div class="inbox-message-preview">${message.content.substring(0, 100)}...</div>
                `;
                
                messageElement.addEventListener('click', function() {
                    showMessageDetail(message.id);
                });
                
                inboxMessages.appendChild(messageElement);
            });
        }

        function showMessageDetail(messageId) {
            const message = messages.find(msg => msg.id === messageId);
            if (!message) return;
            
            // Tandai pesan sebagai sudah dibaca
            if (!message.read) {
                message.read = true;
                localStorage.setItem('messages', JSON.stringify(messages));
                
                // Perbarui tampilan
                const messageElement = document.querySelector(`.inbox-message[data-id="${messageId}"]`);
                if (messageElement) {
                    messageElement.classList.remove('unread');
                }
            }
            
            const messageDetail = document.getElementById('messageDetail');
            messageDetail.innerHTML = `
                <div class="message-detail-header">
                    <div class="message-detail-title">${message.title}</div>
                    <div class="message-detail-sender">${message.sender} <span class="message-rank ${getRankClass(message.senderRank)}">${formatRankForChat(message.senderRank)}</span></div>
                </div>
                <div class="message-detail-date">${formatDate(message.date)}</div>
                <div class="message-detail-content">${message.content}</div>
            `;
            messageDetail.classList.add('active');
        }

        function renderActivities() {
            const activityList = document.getElementById('activityList');
            activityList.innerHTML = '';
            
            // Filter aktivitas user saat ini
            const userActivities = activities.filter(activity => 
                activity.userId === appData.currentUser.username
            );
            
            if (userActivities.length === 0) {
                activityList.innerHTML = '<p class="text-center" style="padding: 20px; color: var(--text-secondary);">Tidak ada aktivitas</p>';
                return;
            }
            
            userActivities.forEach(activity => {
                const activityElement = document.createElement('div');
                activityElement.className = 'activity-item';
                
                let iconClass = 'fas fa-info-circle';
                let activityTitle = activity.type;
                
                switch(activity.type) {
                    case 'login':
                        iconClass = 'fas fa-sign-in-alt';
                        activityTitle = 'Login';
                        break;
                    case 'purchase':
                        iconClass = 'fas fa-shopping-cart';
                        activityTitle = 'Pembelian';
                        break;
                    case 'order_status':
                        iconClass = 'fas fa-exchange-alt';
                        activityTitle = 'Status Pesanan';
                        break;
                    case 'comment':
                        iconClass = 'fas fa-comment';
                        activityTitle = 'Komentar';
                        break;
                }
                
                activityElement.innerHTML = `
                    <div class="activity-icon">
                        <i class="${iconClass}"></i>
                    </div>
                    <div class="activity-details">
                        <div class="activity-title">${activityTitle}</div>
                        <div class="activity-description">${activity.description}</div>
                    </div>
                    <div class="activity-date">${formatDate(activity.date)}</div>
                `;
                
                activityList.appendChild(activityElement);
            });
        }

        // FUNGSI AUTENTIKASI
        function showAuthModal() {
            if (appData.isLoggedIn) {
                // Jika sudah login, arahkan ke profil
                loadPage('profile');
                return;
            }
            
            document.getElementById('authModal').classList.add('active');
            document.getElementById('authModalTitle').textContent = 'Masuk';
            document.getElementById('authSubmitBtn').textContent = 'Masuk';
            document.getElementById('authSwitchBtn').textContent = 'Daftar';
            document.getElementById('confirmPasswordGroup').style.display = 'none';
            document.getElementById('authForm').reset();
        }

        function hideAuthModal() {
            document.getElementById('authModal').classList.remove('active');
        }

        function switchAuthMode() {
            const isLoginMode = document.getElementById('authModalTitle').textContent === 'Masuk';
            
            if (isLoginMode) {
                document.getElementById('authModalTitle').textContent = 'Daftar';
                document.getElementById('authSubmitBtn').textContent = 'Daftar';
                document.getElementById('authSwitchBtn').textContent = 'Masuk';
                document.getElementById('confirmPasswordGroup').style.display = 'block';
            } else {
                document.getElementById('authModalTitle').textContent = 'Masuk';
                document.getElementById('authSubmitBtn').textContent = 'Masuk';
                document.getElementById('authSwitchBtn').textContent = 'Daftar';
                document.getElementById('confirmPasswordGroup').style.display = 'none';
            }
            
            document.getElementById('authForm').reset();
        }

        function handleAuth(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const isLoginMode = document.getElementById('authModalTitle').textContent === 'Masuk';
            
            if (isLoginMode) {
                login(username, password);
            } else {
                const confirmPassword = document.getElementById('confirmPassword').value;
                register(username, password, confirmPassword);
            }
        }

        function login(username, password) {
            // Cari user berdasarkan username dan password
            let user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                appData.currentUser = user;
                appData.isLoggedIn = true;
                
                // PERBAIKAN: Gunakan pengecekan yang lebih robust untuk rank
                const userRank = user.rank.toLowerCase();
                appData.isAdmin = userRank.includes('owner') || userRank.includes('admin');
                appData.isOwner = userRank.includes('owner');
                
                // Update last login
                user.lastLogin = new Date().toISOString();
                localStorage.setItem('users', JSON.stringify(users));
                localStorage.setItem('currentUser', JSON.stringify(user));
                
                // Load YouTube playlist
                appData.youtubePlaylist = user.youtubePlaylist || [];
                
                // Tambahkan aktivitas login
                addActivity(user.username, 'login', 'User berhasil login ke akun');
                
                updateUIAfterLogin();
                hideAuthModal();
                
                alert(`Selamat datang, ${user.username}! Status: ${user.rank}`);
            } else {
                alert('Username atau password salah!');
                // Debug info
                console.log('Users available:', users.map(u => u.username));
            }
        }

        function register(username, password, confirmPassword) {
            if (password !== confirmPassword) {
                alert('Konfirmasi password tidak sesuai!');
                return;
            }
            
            if (users.find(u => u.username === username)) {
                alert('Username sudah digunakan!');
                return;
            }
            
            const newUser = {
                username,
                password,
                rank: 'newbie',
                joinDate: new Date().toISOString().split('T')[0],
                lastLogin: null,
                lastUsernameChange: null,
                freeNameChangeUsed: false,
                youtubePlaylist: []
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            updateTotalUsers();
            
            // Tambahkan aktivitas pendaftaran
            addActivity(username, 'register', 'User baru mendaftar di FurinaSite');
            
            alert('Pendaftaran berhasil! Silakan login.');
            switchAuthMode();
        }

        function logout() {
            // Hentikan YouTube player jika sedang berjalan
            if (appData.youtubePlayer) {
                appData.youtubePlayer.pauseVideo();
                appData.youtubePlayer.destroy();
                appData.youtubePlayer = null;
            }
            
            // Tambahkan aktivitas logout
            if (appData.currentUser) {
                addActivity(appData.currentUser.username, 'logout', 'User logout dari akun');
            }
            
            appData.currentUser = null;
            appData.isLoggedIn = false;
            appData.isAdmin = false;
            appData.isOwner = false;
            appData.youtubePlaylist = [];
            appData.currentYoutubeIndex = -1;
            
            localStorage.removeItem('currentUser');
            
            // Hentikan musik saat logout
            document.getElementById('musicPlayer').classList.add('hidden');
            appData.musicPlaying = false;
            
            // Tutup YouTube player
            document.getElementById('youtubeMusicPlayer').classList.add('hidden');
            
            updateUIAfterLogout();
            loadPage('home');
            
            alert('Anda telah logout.');
        }

        function updateUIAfterLogin() {
            document.getElementById('loginBtn').textContent = 'Profil';
            document.getElementById('welcomeText').textContent = `Halo, ${appData.currentUser.username}!`;
            document.getElementById('welcomeSubtext').textContent = 'Selamat Datang Di Website Furinasite!(masih dalam tahap pengembangan)';
            
            // Tampilkan kontrol admin jika user adalah admin
            if (appData.isAdmin) {
                document.getElementById('adminControls').classList.remove('hidden');
            } else {
                document.getElementById('adminControls').classList.add('hidden');
            }
            
            // Perbarui komentar dan rating
            renderComments();
            updateRatingDisplay();
        }

        function updateUIAfterLogout() {
            document.getElementById('loginBtn').textContent = 'Masuk';
            document.getElementById('welcomeText').textContent = 'Halo, Selamat Datang di FurinaSite!';
            document.getElementById('welcomeSubtext').textContent = 'Website terbaik untuk kebutuhan andaðŸ¤©';
            
            // Sembunyikan kontrol admin
            document.getElementById('adminControls').classList.add('hidden');
            
            // Perbarui komentar dan rating
            renderComments();
            updateRatingDisplay();
        }

        function updateWelcomeMessage() {
            if (appData.isLoggedIn) {
                document.getElementById('welcomeText').textContent = `Halo, ${appData.currentUser.username}!`;
                document.getElementById('welcomeSubtext').textContent = 'Selamat Datang Di Website Furinasite (masih dalam tahap pengembangan)!';
            } else {
                document.getElementById('welcomeText').textContent = 'Selamat Datang di FurinaSite!';
                document.getElementById('welcomeSubtext').textContent = 'Website terbaik untuk kebutuhan andaðŸ¤©';
            }
        }

        // FUNGSI PRODUK
        function renderProducts() {
            const productsGrid = document.getElementById('productsGrid');
            productsGrid.innerHTML = '';
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                
                // Cek apakah produk habis stok
                const isOutOfStock = product.stock !== 'unlimited' && product.stock <= 0;
                
                productCard.className = `product-card animate-fadeIn ${isOutOfStock ? 'out-of-stock' : ''}`;
                
                // Hitung diskon jika ada
                const hasDiscount = product.originalPrice && product.originalPrice > product.price;
                const discountPercent = hasDiscount ? 
                    Math.round((1 - product.price / product.originalPrice) * 100) : 0;
                
                // Tampilkan gambar produk jika ada, jika tidak tampilkan ikon default
                const productImage = product.imageUrl ? 
                    `<img src="${product.imageUrl}" alt="${product.name}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` : 
                    '';
                
                productCard.innerHTML = `
                    <div class="product-image">
                        ${productImage}
                        <div class="product-image-placeholder" style="${product.imageUrl ? 'display: none;' : 'display: flex;'} align-items: center; justify-content: center; width: 100%; height: 100%;">
                            <i class="fas fa-box-open" style="font-size: 3rem; color: var(--text-secondary);"></i>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        ${hasDiscount ? `
                            <div style="display: flex; align-items: center; margin-bottom: 5px;">
                                <span class="product-original-price">Rp ${product.originalPrice.toLocaleString()}</span>
                                <span class="product-discount">${discountPercent}%</span>
                            </div>
                        ` : ''}
                        <div class="product-price">Rp ${product.price.toLocaleString()}</div>
                        <div class="product-stock ${isOutOfStock ? 'out-of-stock' : ''}">
                            ${isOutOfStock ? 'Produk telah kehabisan stok' : `Stok: ${product.stock}`}
                        </div>
                        <p>${product.description}</p>
                        <div class="product-actions">
                            <button class="buy-btn" data-id="${product.id}" ${isOutOfStock ? 'disabled' : ''}>
                                ${isOutOfStock ? 'Stok Habis' : 'Beli'}
                            </button>
                        </div>
                    </div>
                    ${appData.isAdmin ? `
                        <div class="product-admin-actions">
                            <button class="edit-product-btn" data-id="${product.id}" title="Edit Produk">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="delete-product-btn" data-id="${product.id}" title="Hapus Produk">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    ` : ''}
                `;
                
                productsGrid.appendChild(productCard);
            });
            
            // Tambahkan event listener untuk tombol beli
            document.querySelectorAll('.buy-btn:not(:disabled)').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (!appData.isLoggedIn) {
                        alert('Anda harus login untuk membeli produk');
                        return;
                    }
                    
                    const productId = parseInt(this.getAttribute('data-id'));
                    showBuyProductModal(productId);
                });
            });
            
            // Tambahkan event listener untuk tombol edit (admin only)
            if (appData.isAdmin) {
                document.querySelectorAll('.edit-product-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const productId = parseInt(this.getAttribute('data-id'));
                        editProduct(productId);
                    });
                });
                
                // Tambahkan event listener untuk tombol hapus (admin only)
                document.querySelectorAll('.delete-product-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const productId = parseInt(this.getAttribute('data-id'));
                        deleteProduct(productId);
                    });
                });
            }
        }

        function showProductModal() {
            document.getElementById('productModal').classList.add('active');
            document.getElementById('productModalTitle').textContent = 'Tambah Produk';
            document.getElementById('productForm').reset();
            appData.editingProductId = null;
        }

        function hideProductModal() {
            document.getElementById('productModal').classList.remove('active');
        }

        function editProduct(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;
            
            document.getElementById('productModal').classList.add('active');
            document.getElementById('productModalTitle').textContent = 'Edit Produk';
            document.getElementById('productName').value = product.name;
            document.getElementById('productImageUrl').value = product.imageUrl || '';
            document.getElementById('productPrice').value = product.price;
            document.getElementById('productOriginalPrice').value = product.originalPrice || '';
            document.getElementById('productStock').value = product.stock;
            document.getElementById('productDescription').value = product.description;
            appData.editingProductId = id;
        }

        function deleteProduct(id) {
            if (confirm('Apakah Anda yakin ingin menghapus produk ini?')) {
                products = products.filter(p => p.id !== id);
                localStorage.setItem('products', JSON.stringify(products));
                renderProducts();
                alert('Produk berhasil dihapus!');
            }
        }

        function handleProductSubmit(e) {
            e.preventDefault();
            
            const name = document.getElementById('productName').value;
            const imageUrl = document.getElementById('productImageUrl').value;
            const price = parseInt(document.getElementById('productPrice').value);
            const originalPrice = parseInt(document.getElementById('productOriginalPrice').value) || price;
            const stock = document.getElementById('productStock').value;
            const description = document.getElementById('productDescription').value;
            
            if (appData.editingProductId) {
                // Edit produk yang ada
                const productIndex = products.findIndex(p => p.id === appData.editingProductId);
                if (productIndex !== -1) {
                    products[productIndex].name = name;
                    products[productIndex].imageUrl = imageUrl;
                    products[productIndex].price = price;
                    products[productIndex].originalPrice = originalPrice;
                    products[productIndex].stock = stock;
                    products[productIndex].description = description;
                }
            } else {
                // Tambah produk baru
                const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
                products.push({
                    id: newId,
                    name,
                    imageUrl,
                    price,
                    originalPrice,
                    stock,
                    description
                });
            }
            
            localStorage.setItem('products', JSON.stringify(products));
            renderProducts();
            hideProductModal();
            
            alert(appData.editingProductId ? 'Produk berhasil diupdate!' : 'Produk berhasil ditambahkan!');
        }

        // FUNGSI PEMBAYARAN
        function renderPaymentMethods() {
            const paymentMethodsContainer = document.getElementById('paymentMethods');
            paymentMethodsContainer.innerHTML = '';
            
            paymentMethods.forEach(method => {
                if (method.enabled) {
                    const paymentMethod = document.createElement('div');
                    paymentMethod.className = 'payment-method';
                    paymentMethod.innerHTML = `
                        <i class="fab fa-${method.name.toLowerCase()}"></i>
                        <span>${method.name}</span>
                    `;
                    paymentMethod.addEventListener('click', function() {
                        // Hapus active dari semua metode
                        document.querySelectorAll('.payment-method').forEach(pm => {
                            pm.classList.remove('active');
                        });
                        // Tandai yang dipilih
                        this.classList.add('active');
                        
                        appData.selectedPaymentMethod = method.name;
                    });
                    paymentMethodsContainer.appendChild(paymentMethod);
                }
            });
        }

        function showPaymentModal() {
            const paymentCheckboxes = document.getElementById('paymentCheckboxes');
            paymentCheckboxes.innerHTML = '';
            
            paymentMethods.forEach(method => {
                const checkboxContainer = document.createElement('div');
                checkboxContainer.style.marginBottom = '10px';
                checkboxContainer.innerHTML = `
                    <label style="display: flex; align-items: center;">
                        <input type="checkbox" ${method.enabled ? 'checked' : ''} data-id="${method.id}" style="margin-right: 10px;">
                        ${method.name}
                    </label>
                `;
                paymentCheckboxes.appendChild(checkboxContainer);
            });
            
            document.getElementById('paymentModal').classList.add('active');
        }

        function hidePaymentModal() {
            document.getElementById('paymentModal').classList.remove('active');
        }

        function savePaymentMethods() {
            const checkboxes = document.querySelectorAll('#paymentCheckboxes input[type="checkbox"]');
            
            checkboxes.forEach(checkbox => {
                const methodId = parseInt(checkbox.getAttribute('data-id'));
                const method = paymentMethods.find(m => m.id === methodId);
                if (method) {
                    method.enabled = checkbox.checked;
                }
            });
            
            localStorage.setItem('paymentMethods', JSON.stringify(paymentMethods));
            renderPaymentMethods();
            hidePaymentModal();
            
            alert('Metode pembayaran berhasil diupdate!');
        }

        function showPaymentDetailModal(productId) {
            if (!appData.selectedPaymentMethod) {
                alert('Silakan pilih metode pembayaran terlebih dahulu!');
                return;
            }
            
            document.getElementById('paymentDetailTitle').textContent = `Bayar dengan ${appData.selectedPaymentMethod}`;
            document.getElementById('paymentDetailModal').classList.add('active');
            
            // Simpan informasi produk yang dibeli untuk konfirmasi WhatsApp
            const product = products.find(p => p.id === productId);
            if (product) {
                appData.currentProduct = {
                    id: productId,
                    name: product.name,
                    price: 'Rp ' + product.price.toLocaleString()
                };
            }
        }

        function hidePaymentDetailModal() {
            document.getElementById('paymentDetailModal').classList.remove('active');
        }

        function copyPaymentNumber() {
            const paymentNumber = document.getElementById('paymentNumber').textContent;
            
            // Menggunakan Clipboard API
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(paymentNumber).then(() => {
                    alert('Nomor berhasil disalin!');
                }).catch(err => {
                    fallbackCopyText(paymentNumber);
                });
            } else {
                fallbackCopyText(paymentNumber);
            }
        }

        function fallbackCopyText(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            
            // Hindari scroll ke bawah
            textArea.style.top = "0";
            textArea.style.left = "0";
            textArea.style.position = "fixed";
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    alert('Nomor berhasil disalin!');
                } else {
                    alert('Gagal menyalin nomor. Silakan salin manual: ' + text);
                }
            } catch (err) {
                alert('Gagal menyalin nomor. Silakan salin manual: ' + text);
            }
            
            document.body.removeChild(textArea);
        }

        // FUNGSI BELI PRODUK
        function showBuyProductModal(productId) {
            if (!appData.isLoggedIn) {
                alert('Anda harus login untuk membeli produk');
                return;
            }
            
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            // Cek stok produk
            if (product.stock !== 'unlimited' && product.stock <= 0) {
                alert('Maaf, produk ini sudah habis stok');
                return;
            }
            
            document.getElementById('buyProductModal').classList.add('active');
            document.getElementById('buyProductTitle').textContent = `Beli ${product.name}`;
            
            // Render metode pembayaran
            const buyPaymentMethods = document.getElementById('buyPaymentMethods');
            buyPaymentMethods.innerHTML = '';
            
            paymentMethods.forEach(method => {
                if (method.enabled) {
                    const paymentMethod = document.createElement('div');
                    paymentMethod.className = 'payment-method';
                    paymentMethod.innerHTML = `
                        <i class="fab fa-${method.name.toLowerCase()}"></i>
                        <span>${method.name}</span>
                    `;
                    paymentMethod.addEventListener('click', function() {
                        // Hapus active dari semua metode
                        document.querySelectorAll('#buyPaymentMethods .payment-method').forEach(pm => {
                            pm.classList.remove('active');
                        });
                        // Tandai yang dipilih
                        this.classList.add('active');
                        
                        appData.selectedPaymentMethod = method.name;
                    });
                    buyPaymentMethods.appendChild(paymentMethod);
                }
            });
            
            // Set produk yang akan dibeli
            appData.currentProduct = product;
            
            // Reset form
            document.getElementById('buyProductForm').reset();
        }

        function hideBuyProductModal() {
            document.getElementById('buyProductModal').classList.remove('active');
        }

        function handleBuyProduct(e) {
            e.preventDefault();
            
            if (!appData.selectedPaymentMethod) {
                alert('Silakan pilih metode pembayaran terlebih dahulu!');
                return;
            }
            
            const customerName = document.getElementById('customerName').value;
            const customerWa = document.getElementById('customerWa').value;
            const customerNote = document.getElementById('customerNote').value;
            
            // Buat pesanan baru
            const newOrder = {
                id: orders.length > 0 ? Math.max(...orders.map(o => o.id)) + 1 : 1,
                productId: appData.currentProduct.id,
                productName: appData.currentProduct.name,
                price: appData.currentProduct.price,
                customerName,
                customerWa,
                customerNote,
                paymentMethod: appData.selectedPaymentMethod,
                status: 'unpaid',
                date: new Date().toISOString(),
                userId: appData.currentUser.username
            };
            
            orders.push(newOrder);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Tambahkan aktivitas pembelian
            addActivity(appData.currentUser.username, 'purchase', `Membeli ${appData.currentProduct.name} seharga Rp ${appData.currentProduct.price.toLocaleString()}`);
            
            // Kirim pesan ke admin
            sendOrderNotificationToAdmin(newOrder);
            
            hideBuyProductModal();
            
            alert('Pesanan berhasil dibuat! Silakan tunggu konfirmasi dari admin.');
        }

        function sendOrderNotificationToAdmin(order) {
            // Buat pesan untuk admin
            const adminMessage = {
                id: messages.length > 0 ? Math.max(...messages.map(m => m.id)) + 1 : 1,
                title: `Pesanan Baru #${order.id}`,
                content: `Ada pesanan baru dari ${order.customerName} (${order.customerWa}) untuk produk ${order.productName} seharga Rp ${order.price.toLocaleString()}. Status: ${order.status === 'unpaid' ? 'Belum Bayar' : 'Sudah Bayar'}`,
                sender: 'System',
                senderRank: 'System',
                target: ['Sorveign', 'admin'],
                date: new Date().toISOString(),
                read: false
            };
            
            messages.push(adminMessage);
            localStorage.setItem('messages', JSON.stringify(messages));
        }

        // FUNGSI PENGUMUMAN
        function showAnnouncementModal() {
            if (!appData.isAdmin) {
                alert('Hanya admin yang dapat mengirim pengumuman');
                return;
            }
            
            document.getElementById('announcementModal').classList.add('active');
            document.getElementById('announcementForm').reset();
            document.getElementById('specificUserGroup').style.display = 'none';
        }

        function hideAnnouncementModal() {
            document.getElementById('announcementModal').classList.remove('active');
        }

        function renderSpecificUserOptions() {
            const specificUserSelect = document.getElementById('specificUser');
            specificUserSelect.innerHTML = '';
            
            users.forEach(user => {
                const option = document.createElement('option');
                option.value = user.username;
                option.textContent = user.username;
                specificUserSelect.appendChild(option);
            });
        }

        function handleAnnouncement(e) {
            e.preventDefault();
            
            const title = document.getElementById('announcementTitle').value;
            const content = document.getElementById('announcementContent').value;
            const target = document.querySelector('input[name="announcementTarget"]:checked').value;
            const specificUser = target === 'specific' ? document.getElementById('specificUser').value : null;
            
            const newAnnouncement = {
                id: messages.length > 0 ? Math.max(...messages.map(m => m.id)) + 1 : 1,
                title,
                content,
                sender: appData.currentUser.username,
                senderRank: appData.currentUser.rank,
                target: target === 'all' ? 'all' : specificUser,
                date: new Date().toISOString(),
                read: false
            };
            
            messages.push(newAnnouncement);
            localStorage.setItem('messages', JSON.stringify(messages));
            
            hideAnnouncementModal();
            
            alert('Pengumuman berhasil dikirim!');
        }

        // FUNGSI KOMENTAR
        function renderComments() {
            const commentsList = document.getElementById('commentsList');
            commentsList.innerHTML = '';
            
            comments.forEach(comment => {
                const commentElement = document.createElement('div');
                commentElement.className = 'comment animate-fadeIn';
                
                // Render bintang untuk rating komentar
                let starsHtml = '';
                for (let i = 1; i <= 5; i++) {
                    if (i <= comment.rating) {
                        starsHtml += '<span class="comment-rating-star-display active"><i class="fas fa-star"></i></span>';
                    } else {
                        starsHtml += '<span class="comment-rating-star-display"><i class="far fa-star"></i></span>';
                    }
                }
                
                commentElement.innerHTML = `
                    <div class="comment-header">
                        <div class="comment-author">${comment.username}</div>
                        <div class="comment-date">${formatDate(comment.date)}</div>
                    </div>
                    <div class="comment-rating-display">
                        <div class="comment-rating-stars-display">
                            ${starsHtml}
                        </div>
                    </div>
                    <div class="comment-content">${comment.content}</div>
                `;
                commentsList.appendChild(commentElement);
            });
            
            // Scroll ke bawah untuk melihat komentar terbaru
            commentsList.scrollTop = commentsList.scrollHeight;
        }

        function toggleCommentSubmit() {
            const commentInput = document.getElementById('commentInput');
            const commentSubmit = document.getElementById('commentSubmit');
            commentSubmit.disabled = !commentInput.value.trim() || appData.commentRating === 0;
        }

        function setCommentRating(value) {
            appData.commentRating = value;
            
            // Update tampilan bintang
            document.querySelectorAll('.comment-rating-star').forEach(star => {
                const starValue = parseInt(star.getAttribute('data-value'));
                const icon = star.querySelector('i');
                
                if (starValue <= value) {
                    icon.className = 'fas fa-star';
                    star.style.color = 'var(--warning-color)';
                } else {
                    icon.className = 'far fa-star';
                    star.style.color = '#ddd';
                }
            });
            
            toggleCommentSubmit();
        }

        function submitComment() {
            if (!appData.isLoggedIn) {
                alert('Anda harus login untuk mengirim komentar');
                return;
            }
            
            const content = document.getElementById('commentInput').value.trim();
            if (!content) return;
            
            if (appData.commentRating === 0) {
                alert('Silakan berikan rating terlebih dahulu!');
                return;
            }
            
            const newComment = {
                id: comments.length > 0 ? Math.max(...comments.map(c => c.id)) + 1 : 1,
                username: appData.currentUser.username,
                content,
                rating: appData.commentRating,
                date: new Date().toISOString().replace('T', ' ').substring(0, 19)
            };
            
            comments.push(newComment);
            localStorage.setItem('comments', JSON.stringify(comments));
            
            // Reset form
            document.getElementById('commentInput').value = '';
            appData.commentRating = 0;
            document.getElementById('commentSubmit').disabled = true;
            
            // Reset bintang rating
            document.querySelectorAll('.comment-rating-star').forEach(star => {
                const icon = star.querySelector('i');
                icon.className = 'far fa-star';
                star.style.color = '#ddd';
            });
            
            renderComments();
            updateRatingDisplay();
            updateProfileStats();
            
            alert('Komentar berhasil dikirim!');
        }

        // FUNGSI RATING
        function updateRatingDisplay() {
            // Gabungkan rating dari komentar dan rating biasa
            const allRatings = [...ratings];
            
            // Tambahkan rating dari komentar
            comments.forEach(comment => {
                allRatings.push({
                    username: comment.username,
                    value: comment.rating,
                    date: comment.date
                });
            });
            
            if (allRatings.length === 0) {
                document.getElementById('averageRating').textContent = '0';
                document.getElementById('ratingCount').textContent = 'Belum ada rating';
                
                // Render bintang kosong
                const averageStars = document.getElementById('averageStars');
                averageStars.innerHTML = '';
                
                for (let i = 1; i <= 5; i++) {
                    const star = document.createElement('span');
                    star.className = 'star';
                    star.innerHTML = '<i class="far fa-star"></i>';
                    star.style.color = '#ddd';
                    averageStars.appendChild(star);
                }
                return;
            }
            
            const totalRating = allRatings.reduce((sum, rating) => sum + rating.value, 0);
            const averageRating = (totalRating / allRatings.length).toFixed(1);
            
            document.getElementById('averageRating').textContent = averageRating;
            document.getElementById('ratingCount').textContent = `Berdasarkan ${allRatings.length} rating`;
            
            // Render bintang rata-rata
            const averageStars = document.getElementById('averageStars');
            averageStars.innerHTML = '';
            
            for (let i = 1; i <= 5; i++) {
                const star = document.createElement('span');
                star.className = 'star';
                if (i <= Math.floor(averageRating)) {
                    star.innerHTML = '<i class="fas fa-star"></i>';
                    star.style.color = 'var(--warning-color)';
                } else if (i === Math.ceil(averageRating) && averageRating % 1 !== 0) {
                    star.innerHTML = '<i class="fas fa-star-half-alt"></i>';
                    star.style.color = 'var(--warning-color)';
                } else {
                    star.innerHTML = '<i class="far fa-star"></i>';
                    star.style.color = '#ddd';
                }
                averageStars.appendChild(star);
            }
        }

        // FUNGSI LIVE CHAT
        function renderChatMessages() {
            const chatMessagesContainer = document.getElementById('chatMessages');
            chatMessagesContainer.innerHTML = '';
            
            chatMessages.forEach(msg => {
                const messageDiv = document.createElement('div');
                const isCurrentUser = msg.sender === (appData.currentUser ? appData.currentUser.username : '');
                messageDiv.className = `message ${isCurrentUser ? 'sent' : 'received'}`;
                
                // Format rank untuk ditampilkan di chat
                const rankDisplay = msg.rank ? formatRankForChat(msg.rank) : '';
                const rankClass = msg.rank ? getRankClass(msg.rank) : '';
                
                messageDiv.innerHTML = `
                    <div class="message-sender">
                        ${msg.sender} ${rankDisplay ? `<span class="message-rank ${rankClass}">${rankDisplay}</span>` : ''}
                    </div>
                    <div class="message-content">${msg.content}</div>
                    <div class="message-time">${msg.time}</div>
                `;
                chatMessagesContainer.appendChild(messageDiv);
            });
            
            // Scroll ke bawah untuk melihat pesan terbaru
            chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight;
        }

        function sendChatMessage() {
            if (!appData.isLoggedIn) {
                alert('Anda harus login untuk mengirim pesan di chat');
                return;
            }
            
            const chatInput = document.getElementById('chatInput');
            const message = chatInput.value.trim();
            
            if (!message) return;
            
            const now = new Date();
            const timeString = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
            
            const newMessage = {
                id: chatMessages.length > 0 ? Math.max(...chatMessages.map(m => m.id)) + 1 : 1,
                sender: appData.currentUser.username,
                content: message,
                time: timeString,
                type: 'sent',
                rank: appData.currentUser.rank
            };
            
            chatMessages.push(newMessage);
            localStorage.setItem('chatMessages', JSON.stringify(chatMessages));
            
            chatInput.value = '';
            renderChatMessages();
        }

        // FUNGSI PROFIL
        function loadProfileData() {
            if (!appData.isLoggedIn) {
                alert('Anda harus login untuk melihat profil');
                loadPage('home');
                return;
            }
            
            document.getElementById('profileName').textContent = appData.currentUser.username;
            document.getElementById('profileRank').textContent = formatRankForDisplay(appData.currentUser.rank);
            
            updateProfileStats();
            
            // Tampilkan user management jika admin
            if (appData.isAdmin) {
                document.getElementById('userManagement').classList.remove('hidden');
                renderUsersList();
            } else {
                document.getElementById('userManagement').classList.add('hidden');
            }
            
            // Tampilkan order management jika admin
            if (appData.isAdmin) {
                document.getElementById('orderManagement').classList.remove('hidden');
                renderOrdersList();
            } else {
                document.getElementById('orderManagement').classList.add('hidden');
            }
        }

        function updateProfileStats() {
            // Hitung jumlah komentar dari user ini
            const userComments = comments.filter(c => c.username === appData.currentUser.username);
            document.getElementById('commentsCount').textContent = userComments.length;
            
            // Hitung jumlah rating dari user ini
            const userRatings = ratings.filter(r => r.username === appData.currentUser.username);
            document.getElementById('ratingsCount').textContent = userRatings.length;
            
            // Format tanggal bergabung
            const joinDate = new Date(appData.currentUser.joinDate);
            document.getElementById('joinDate').textContent = formatDate(joinDate);
            
            // Format last login
            if (appData.currentUser.lastLogin) {
                const lastLogin = new Date(appData.currentUser.lastLogin);
                document.getElementById('lastLogin').textContent = formatDate(lastLogin);
            } else {
                document.getElementById('lastLogin').textContent = '-';
            }
        }

        function renderUsersList() {
            const usersList = document.getElementById('usersList');
            usersList.innerHTML = '';
            
            users.forEach(user => {
                const userElement = document.createElement('div');
                userElement.className = 'user-item';
                
                const rankClass = getRankClass(user.rank);
                const rankDisplay = formatRankForDisplay(user.rank);
                
                userElement.innerHTML = `
                    <div class="user-info">
                        <div class="user-name">${user.username}</div>
                        <div class="user-details">
                            <span>Bergabung: ${formatDate(user.joinDate)}</span>
                            <span class="user-rank ${rankClass}">${rankDisplay}</span>
                        </div>
                    </div>
                    <div class="user-actions">
                        ${user.username !== appData.currentUser.username ? `
                            <button class="delete-user-btn" data-username="${user.username}">
                                <i class="fas fa-trash"></i> Hapus
                            </button>
                        ` : `
                            <button class="delete-user-btn" disabled>
                                <i class="fas fa-trash"></i> Hapus
                            </button>
                        `}
                    </div>
                `;
                
                usersList.appendChild(userElement);
            });
            
            // Tambahkan event listener untuk tombol hapus
            document.querySelectorAll('.delete-user-btn:not(:disabled)').forEach(btn => {
                btn.addEventListener('click', function() {
                    const username = this.getAttribute('data-username');
                    deleteUser(username);
                });
            });
        }

        function deleteUser(username) {
            if (username === appData.currentUser.username) {
                alert('Anda tidak dapat menghapus akun Anda sendiri');
                return;
            }
            
            if (confirm(`Apakah Anda yakin ingin menghapus user ${username}?`)) {
                // Hapus user dari daftar
                users = users.filter(u => u.username !== username);
                localStorage.setItem('users', JSON.stringify(users));
                
                // Hapus komentar user
                comments = comments.filter(c => c.username !== username);
                localStorage.setItem('comments', JSON.stringify(comments));
                
                // Hapus rating user
                ratings = ratings.filter(r => r.username !== username);
                localStorage.setItem('ratings', JSON.stringify(ratings));
                
                // Hapus pesanan user
                orders = orders.filter(o => o.userId !== username);
                localStorage.setItem('orders', JSON.stringify(orders));
                
                // Hapus aktivitas user
                activities = activities.filter(a => a.userId !== username);
                localStorage.setItem('activities', JSON.stringify(activities));
                
                // Perbarui tampilan
                renderUsersList();
                updateTotalUsers();
                
                alert(`User ${username} berhasil dihapus!`);
            }
        }

        function renderOrdersList() {
            const ordersList = document.getElementById('ordersList');
            ordersList.innerHTML = '';
            
            if (orders.length === 0) {
                ordersList.innerHTML = '<p class="text-center" style="padding: 20px; color: var(--text-secondary);">Tidak ada pesanan</p>';
                return;
            }
            
            orders.forEach(order => {
                const orderElement = document.createElement('div');
                orderElement.className = 'order-item';
                
                const statusClass = order.status === 'paid' ? 'status-paid' : 'status-unpaid';
                const statusText = order.status === 'paid' ? 'Lunas' : 'Belum Bayar';
                
                orderElement.innerHTML = `
                    <div class="order-header">
                        <div class="order-id">Pesanan #${order.id}</div>
                        <div class="order-status ${statusClass}">${statusText}</div>
                    </div>
                    <div class="order-details">
                        <div class="order-product">${order.productName}</div>
                        <div class="order-price">Rp ${order.price.toLocaleString()}</div>
                        <div class="order-customer">${order.customerName}</div>
                        <div class="order-wa">${order.customerWa}</div>
                    </div>
                    <div class="order-actions">
                        ${order.status === 'unpaid' ? `
                            <button class="admin-btn mark-paid-btn" data-id="${order.id}">
                                Tandai Lunas
                            </button>
                        ` : ''}
                        <button class="admin-btn delete-order-btn" data-id="${order.id}">
                            Hapus Pesanan
                        </button>
                    </div>
                `;
                
                ordersList.appendChild(orderElement);
            });
            
            // Tambahkan event listener untuk tombol
            document.querySelectorAll('.mark-paid-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderId = parseInt(this.getAttribute('data-id'));
                    markOrderAsPaid(orderId);
                });
            });
            
            document.querySelectorAll('.delete-order-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderId = parseInt(this.getAttribute('data-id'));
                    deleteOrder(orderId);
                });
            });
        }

        function markOrderAsPaid(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            order.status = 'paid';
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Kirim notifikasi ke user
            const userMessage = {
                id: messages.length > 0 ? Math.max(...messages.map(m => m.id)) + 1 : 1,
                title: `Pembayaran Dikonfirmasi #${order.id}`,
                content: `Pembayaran untuk pesanan ${order.productName} telah dikonfirmasi. Terima kasih!`,
                sender: 'System',
                senderRank: 'System',
                target: order.userId,
                date: new Date().toISOString(),
                read: false
            };
            
            messages.push(userMessage);
            localStorage.setItem('messages', JSON.stringify(messages));
            
            // Tambahkan aktivitas
            addActivity(order.userId, 'order_status', `Pembayaran untuk pesanan ${order.productName} dikonfirmasi`);
            
            renderOrdersList();
            alert('Pesanan berhasil ditandai sebagai lunas!');
        }

        function deleteOrder(orderId) {
            if (confirm('Apakah Anda yakin ingin menghapus pesanan ini?')) {
                orders = orders.filter(o => o.id !== orderId);
                localStorage.setItem('orders', JSON.stringify(orders));
                renderOrdersList();
                alert('Pesanan berhasil dihapus!');
            }
        }

        // FUNGSI GANTI NAMA
        function showChangeNameModal() {
            if (!appData.isLoggedIn) {
                alert('Anda harus login untuk mengganti nama');
                return;
            }
            
            document.getElementById('changeNameModal').classList.add('active');
            document.getElementById('newUsername').value = appData.currentUser.username;
            
            // Perbarui informasi perubahan nama
            updateChangeNameInfo();
        }

        function hideChangeNameModal() {
            document.getElementById('changeNameModal').classList.remove('active');
        }

        function updateChangeNameInfo() {
            const freeChangesLeft = document.getElementById('freeChangesLeft');
            const changeNameInfo = document.getElementById('changeNameInfo');
            const changeNameCooldown = document.getElementById('changeNameCooldown');
            const cooldownTime = document.getElementById('cooldownTime');
            const changeNameSubmitBtn = document.getElementById('changeNameSubmitBtn');
            
            if (!appData.currentUser.freeNameChangeUsed) {
                // Masih ada perubahan gratis
                freeChangesLeft.textContent = '1';
                changeNameInfo.style.display = 'block';
                changeNameCooldown.style.display = 'none';
                changeNameSubmitBtn.disabled = false;
            } else {
                // Sudah menggunakan perubahan gratis, cek cooldown
                const lastChange = new Date(appData.currentUser.lastUsernameChange);
                const now = new Date();
                const diffTime = Math.abs(now - lastChange);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                if (diffDays < 7) {
                    // Masih dalam cooldown
                    const daysLeft = 7 - diffDays;
                    cooldownTime.textContent = `${daysLeft} hari`;
                    changeNameInfo.style.display = 'none';
                    changeNameCooldown.style.display = 'block';
                    changeNameSubmitBtn.disabled = true;
                } else {
                    // Cooldown selesai
                    changeNameInfo.textContent = 'Anda dapat mengganti nama sekali lagi';
                    changeNameInfo.style.display = 'block';
                    changeNameCooldown.style.display = 'none';
                    changeNameSubmitBtn.disabled = false;
                }
            }
        }

        function handleChangeName(e) {
            e.preventDefault();
            
            const newUsername = document.getElementById('newUsername').value.trim();
            
            if (!newUsername) {
                alert('Masukkan nama baru');
                return;
            }
            
            if (newUsername === appData.currentUser.username) {
                alert('Nama baru sama dengan nama lama');
                return;
            }
            
            if (users.find(u => u.username === newUsername && u.username !== appData.currentUser.username)) {
                alert('Username sudah digunakan oleh user lain!');
                return;
            }
            
            // Cek apakah masih ada perubahan gratis
            if (!appData.currentUser.freeNameChangeUsed) {
                // Gunakan perubahan gratis
                appData.currentUser.freeNameChangeUsed = true;
                appData.currentUser.lastUsernameChange = new Date().toISOString();
            } else {
                // Cek cooldown
                const lastChange = new Date(appData.currentUser.lastUsernameChange);
                const now = new Date();
                const diffTime = Math.abs(now - lastChange);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                if (diffDays < 7) {
                    alert(`Anda masih harus menunggu ${7 - diffDays} hari untuk mengganti nama lagi`);
                    return;
                }
                
                // Update last change
                appData.currentUser.lastUsernameChange = new Date().toISOString();
            }
            
            // Update username di semua data
            const oldUsername = appData.currentUser.username;
            appData.currentUser.username = newUsername;
            
            // Update di users
            const userIndex = users.findIndex(u => u.username === oldUsername);
            if (userIndex !== -1) {
                users[userIndex] = appData.currentUser;
            }
            
            // Update di comments
            comments.forEach(comment => {
                if (comment.username === oldUsername) {
                    comment.username = newUsername;
                }
            });
            
            // Update di ratings
            ratings.forEach(rating => {
                if (rating.username === oldUsername) {
                    rating.username = newUsername;
                }
            });
            
            // Update di orders
            orders.forEach(order => {
                if (order.userId === oldUsername) {
                    order.userId = newUsername;
                }
            });
            
            // Update di activities
            activities.forEach(activity => {
                if (activity.userId === oldUsername) {
                    activity.userId = newUsername;
                }
            });
            
            // Simpan perubahan
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('currentUser', JSON.stringify(appData.currentUser));
            localStorage.setItem('comments', JSON.stringify(comments));
            localStorage.setItem('ratings', JSON.stringify(ratings));
            localStorage.setItem('orders', JSON.stringify(orders));
            localStorage.setItem('activities', JSON.stringify(activities));
            
            // Perbarui UI
            document.getElementById('profileName').textContent = newUsername;
            document.getElementById('welcomeText').textContent = `Halo, ${newUsername}!`;
            
            hideChangeNameModal();
            
            alert(`Nama berhasil diganti menjadi ${newUsername}!`);
        }

        // FUNGSI RESET DATA (DEBUG)
        function showResetDataModal() {
            if (!appData.isOwner) {
                alert('Hanya owner yang dapat mereset data!');
                return;
            }
            
            document.getElementById('resetDataModal').classList.add('active');
            document.getElementById('resetConfirmInput').value = '';
            document.getElementById('resetDataConfirmBtn').disabled = true;
        }

        function hideResetDataModal() {
            document.getElementById('resetDataModal').classList.remove('active');
        }

        function toggleResetDataConfirm() {
            const confirmInput = document.getElementById('resetConfirmInput');
            const confirmBtn = document.getElementById('resetDataConfirmBtn');
            confirmBtn.disabled = confirmInput.value.toLowerCase() !== 'reset';
        }

        function resetData() {
            if (!appData.isOwner) {
                alert('Hanya owner yang dapat mereset data!');
                return;
            }
            
            // Reset semua data ke default
            users = [
                { 
                    username: 'Sorveign', 
                    password: 'satriya12', 
                    rank: 'owner',
                    joinDate: '2023-01-01', 
                    lastLogin: null,
                    lastUsernameChange: null,
                    freeNameChangeUsed: false,
                    youtubePlaylist: []
                },
                { 
                    username: 'Admin', 
                    password: 'mongo21', 
                    rank: 'admin',
                    joinDate: '2023-01-01', 
                    lastLogin: null,
                    lastUsernameChange: null,
                    freeNameChangeUsed: false,
                    youtubePlaylist: []
                }
            ];
            
            products = [
                { 
                    id: 1, 
                    name: 'Akun Premium Viu Lifetime', 
                    price: 2000, 
                    originalPrice: 10000, 
                    stock: '1', 
                    description: 'Keuntungan Premium: no iklan, bebas menonton semua serial premium, mendapatkan penyimpanan cloud, dsb',
                    imageUrl: '' 
                }
            ];
            
            comments = [];
            ratings = [];
            chatMessages = [
                { 
                    id: 1, 
                    sender: 'System', 
                    content: 'Selamat datang di chat room publik! Semua pesan dapat dilihat oleh pengguna lain.', 
                    time: '10:00', 
                    type: 'received',
                    rank: 'owner'
                }
            ];
            
            messages = [
                {
                    id: 1,
                    title: 'Selamat Datang di FurinaSite!',
                    content: 'Terima kasih telah bergabung dengan FurinaSite. Kami harap Anda menikmati pengalaman menggunakan website kami. Jika ada pertanyaan, jangan ragu untuk menghubungi kami.',
                    sender: 'Sorveign',
                    senderRank: 'owner',
                    target: 'all',
                    date: new Date().toISOString(),
                    read: false
                }
            ];
            
            orders = [];
            activities = [];
            
            // Simpan ke localStorage
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('products', JSON.stringify(products));
            localStorage.setItem('comments', JSON.stringify(comments));
            localStorage.setItem('ratings', JSON.stringify(ratings));
            localStorage.setItem('paymentMethods', JSON.stringify(paymentMethods));
            localStorage.setItem('chatMessages', JSON.stringify(chatMessages));
            localStorage.setItem('messages', JSON.stringify(messages));
            localStorage.setItem('orders', JSON.stringify(orders));
            localStorage.setItem('activities', JSON.stringify(activities));
            
            // Logout user saat ini
            appData.currentUser = null;
            appData.isLoggedIn = false;
            appData.isAdmin = false;
            appData.isOwner = false;
            localStorage.removeItem('currentUser');
            
            // Perbarui UI
            updateUIAfterLogout();
            renderProducts();
            renderComments();
            renderPaymentMethods();
            updateRatingDisplay();
            updateTotalUsers();
            
            hideResetDataModal();
            
            alert('Data berhasil direset! Halaman akan dimuat ulang.');
            location.reload();
        }

        // FUNGSI BANTUAN
        function updateTotalUsers() {
            document.getElementById('totalUsers').textContent = users.length;
        }

        // FUNGSI UTILITAS
        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) {
                return 'Hari ini';
            } else if (diffDays === 1) {
                return 'Kemarin';
            } else if (diffDays < 7) {
                return `${diffDays} hari yang lalu`;
            } else {
                return date.toLocaleDateString('id-ID', {
                    day: 'numeric',
                    month: 'short',
                    year: 'numeric'
                });
            }
        }

        function formatRankForDisplay(rank) {
            const rankMap = {
                'owner': 'ðŸª Owner',
                'admin': 'Admin',
                'newbie': 'Newbie'
            };
            
            return rankMap[rank.toLowerCase()] || rank;
        }

        function formatRankForChat(rank) {
            const rankMap = {
                'owner': 'ðŸª Owner',
                'admin': 'Admin',
                'newbie': 'Newbie'
            };
            
            return rankMap[rank.toLowerCase()] || rank;
        }

        function getRankClass(rank) {
            const rankClassMap = {
                'owner': 'rank-owner',
                'admin': 'rank-admin',
                'newbie': 'rank-newbie'
            };
            
            return rankClassMap[rank.toLowerCase()] || 'rank-newbie';
        }

        function addActivity(userId, type, description) {
            const newActivity = {
                id: activities.length > 0 ? Math.max(...activities.map(a => a.id)) + 1 : 1,
                userId,
                type,
                description,
                date: new Date().toISOString()
            };
            
            activities.push(newActivity);
            localStorage.setItem('activities', JSON.stringify(activities));
        }
    </script>

    <!-- Load YouTube IFrame API -->
    <script src="https://www.youtube.com/iframe_api"></script>
</body>
</html>